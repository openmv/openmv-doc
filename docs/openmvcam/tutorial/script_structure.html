
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>5. Script Structure &#8212; MicroPython 1.19 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/customstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="../../_static/openmv.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="6. I/O Tutorial" href="io_tutorial.html" />
    <link rel="prev" title="4. OpenMV IDE Overview" href="openmvide_overview.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="io_tutorial.html" title="6. I/O Tutorial"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="openmvide_overview.html" title="4. OpenMV IDE Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">MicroPython 1.19 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../quickref.html" >Quick reference for the openmvcam</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">OpenMV Cam Tutorial</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="script-structure">
<h1><span class="section-number">5. </span>Script Structure<a class="headerlink" href="#script-structure" title="Permalink to this headline">¶</a></h1>
<p>Let’s learn how to program your OpenMV Cam now! Note that this tuturial assumes
you know how the python language works. If you don’t know how python works
please study up on it. There are plenty of web tuturials about how to write
python code (finally, if you know any other C like programming language you can
pick up python easily since it’s VERY similar).</p>
<p>Anyway, any script you write is going to have three distinct parts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">...</span>

<span class="o">...</span>

<span class="n">one</span> <span class="n">time</span> <span class="n">setup</span> <span class="o">...</span>

<span class="o">...</span>

<span class="k">while</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span> <span class="c1"># Loop</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The first part of your OpenMV Cam code should include some header comments,
import statements to bring modules into scope, and finally constants and global
variables in your code.</p>
<p>Next, you’re going to want to do one-time setup code. This includes things like
creating I/O pin objects, setting up the camera, defining helper functions,
etc.</p>
<p>Finally, you’ll create a <code class="docutils literal notranslate"><span class="pre">while(True):</span></code> loop under which you’ll put all code
that gets called in a loop repeatedly until power-off.</p>
<p>Here’s an example of this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">### Header comments, import statements, etc.</span>

<span class="c1"># Hello World Example</span>
<span class="c1">#</span>
<span class="c1"># Welcome to the OpenMV IDE! Click on the green run arrow button below to run the script!</span>

<span class="kn">import</span> <span class="nn">sensor</span><span class="o">,</span> <span class="nn">image</span><span class="o">,</span> <span class="nn">time</span>

<span class="c1">### One time setup</span>

<span class="n">sensor</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>                      <span class="c1"># Reset and initialize the sensor.</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">set_pixformat</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">RGB565</span><span class="p">)</span> <span class="c1"># Set pixel format to RGB565 (or GRAYSCALE)</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">set_framesize</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">QVGA</span><span class="p">)</span>   <span class="c1"># Set frame size to QVGA (320x240)</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">skip_frames</span><span class="p">(</span><span class="n">time</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">)</span>     <span class="c1"># Wait for settings take effect.</span>
<span class="n">clock</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">clock</span><span class="p">()</span>                <span class="c1"># Create a clock object to track the FPS.</span>

<span class="c1">### Infinite loop</span>

<span class="k">while</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">clock</span><span class="o">.</span><span class="n">tick</span><span class="p">()</span>                    <span class="c1"># Update the FPS clock.</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">snapshot</span><span class="p">()</span>         <span class="c1"># Take a picture and return the image.</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">clock</span><span class="o">.</span><span class="n">fps</span><span class="p">())</span>              <span class="c1"># Note: OpenMV Cam runs about half as fast when connected</span>
                                    <span class="c1"># to the IDE. The FPS should increase once disconnected.</span>
</pre></div>
</div>
<p>Note that if you do not have an infinite while loop in your code then once your
OpenMV Cam finishes running the script it will sit there and do nothing.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/web-logo-sticky.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="openmvide_overview.html"
                        title="previous chapter"><span class="section-number">4. </span>OpenMV IDE Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="io_tutorial.html"
                        title="next chapter"><span class="section-number">6. </span>I/O Tutorial</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/openmvcam/tutorial/script_structure.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="io_tutorial.html" title="6. I/O Tutorial"
             >next</a> |</li>
        <li class="right" >
          <a href="openmvide_overview.html" title="4. OpenMV IDE Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">MicroPython 1.19 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../quickref.html" >Quick reference for the openmvcam</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" >OpenMV Cam Tutorial</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2023, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 02 May 2023.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>