<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quick reference for the SAMD21/SAMD51 family &mdash; MicroPython 1.22 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
      <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=f8c2205d"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroPython
              <img src="../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.22
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../library/index.html">MicroPython libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Quick reference for the SAMD21/SAMD51 family</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/samd/quickref.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="quick-reference-for-the-samd21-samd51-family">
<span id="samd-quickref"></span><h1>Quick reference for the SAMD21/SAMD51 family<a class="headerlink" href="#quick-reference-for-the-samd21-samd51-family" title="Permalink to this heading">¶</a></h1>
<a class="reference internal image-reference" href="../_images/itsybitsy_m4_express.jpg"><img alt="Adafruit ItsyBitsy M4 Express board" src="../_images/itsybitsy_m4_express.jpg" style="width: 640px;" /></a>
<p>The Adafruit ItsyBitsy M4 Express board.</p>
<p>Below is a quick reference for SAMD21/SAMD51-based boards.  If it is your first time
working with this board it may be useful to get an overview of the microcontroller:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="general.html">General information about the SAMD port</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/intro.html">Getting started with MicroPython on the SAMD</a></li>
<li class="toctree-l1"><a class="reference internal" href="pinout.html">Pinout for the SAMD machine modules</a></li>
</ul>
</div>
<section id="installing-micropython">
<h2>Installing MicroPython<a class="headerlink" href="#installing-micropython" title="Permalink to this heading">¶</a></h2>
<p>See the corresponding section of tutorial: <a class="reference internal" href="tutorial/intro.html#samd-intro"><span class="std std-ref">Getting started with MicroPython on the SAMD</span></a>. It also includes
a troubleshooting subsection.</p>
</section>
<section id="general-board-control">
<h2>General board control<a class="headerlink" href="#general-board-control" title="Permalink to this heading">¶</a></h2>
<p>The MicroPython REPL is on the USB port, configured in VCP mode.
Tab-completion is useful to find out what methods an object has.
Paste mode (Ctrl-E) is useful to paste a large slab of Python code into
the REPL.</p>
<p>The <a class="reference internal" href="../library/machine.html#module-machine" title="machine: functions related to the hardware"><code class="xref py py-mod docutils literal notranslate"><span class="pre">machine</span></code></a> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">machine</span>

<span class="n">machine</span><span class="o">.</span><span class="n">freq</span><span class="p">()</span>            <span class="c1"># get the current frequency of the CPU</span>
<span class="n">machine</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="mi">96_000_000</span><span class="p">)</span>  <span class="c1"># set the CPU frequency to 96 MHz</span>
</pre></div>
</div>
<p>The range accepted by the function call is 1_000_000 to 200_000_000 (1 MHz to 200 MHz)
for SAMD51 and 1_000_000 to 54_000_000 (1 MHz to 54 MHz) for SAMD21. The safe
range for SAMD51 according to the data sheet is up to 120 MHz, for the SAMD21 up to 48Mhz.
Frequencies below 48Mhz are set by dividing 48Mhz by an integer, limiting the number of
discrete frequencies to 24Mhz, 16Mhz, 12MHz, and so on.
At frequencies below 8 MHz USB will be disabled. Changing the frequency below 48 MHz
impacts the baud rates of UART, I2C and SPI. These have to be set again after
changing the CPU frequency. The ms and µs timers are not affected by the frequency
change.</p>
</section>
<section id="delay-and-timing">
<h2>Delay and timing<a class="headerlink" href="#delay-and-timing" title="Permalink to this heading">¶</a></h2>
<p>Use the <a class="reference internal" href="../library/time.html#module-time" title="time: time related functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code></a> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>           <span class="c1"># sleep for 1 second</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>      <span class="c1"># sleep for 500 milliseconds</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep_us</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>       <span class="c1"># sleep for 10 microseconds</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">ticks_ms</span><span class="p">()</span> <span class="c1"># get millisecond counter</span>
<span class="n">delta</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">ticks_diff</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">ticks_ms</span><span class="p">(),</span> <span class="n">start</span><span class="p">)</span> <span class="c1"># compute time difference</span>
</pre></div>
</div>
</section>
<section id="clock-and-time">
<h2>Clock and time<a class="headerlink" href="#clock-and-time" title="Permalink to this heading">¶</a></h2>
<p>Two groups of functions are provided for time information. All boards have the
datetime(), mktime() and time() functions. Boards with a 32kHz crystal also
provide an RTC() module. The epoch start date is 1.1.2000.</p>
<p>Use the <a class="reference internal" href="../library/time.html#module-time" title="time: time related functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">time</span></code></a> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>

<span class="n">date_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">()</span>        <span class="c1"># Show the actual date/time information</span>
<span class="n">date_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span> <span class="c1"># decode the date/time form the seconds value</span>
<span class="n">seconds</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">date_time_tuple</span><span class="p">)</span> <span class="c1"># Convert seconds to a datetime tuple</span>
<span class="n">second</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>                <span class="c1"># Return the actual system time.</span>
</pre></div>
</div>
<p>The format of the date_time tuple follows the standard. The µs value of the date_time
tuple is ignored. On boards without the RTC module, time.localtime(seconds) sets the
system time. Use of the Use the <code class="xref py py-mod docutils literal notranslate"><span class="pre">RTC</span></code> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">RTC</span>
<span class="n">rtc</span> <span class="o">=</span> <span class="n">RTC</span><span class="p">()</span>
<span class="n">date_time</span> <span class="o">=</span> <span class="n">rtc</span><span class="o">.</span><span class="n">datetime</span><span class="p">()</span>      <span class="c1"># return the actual date &amp; time.</span>
<span class="n">rtc</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">date_time_tuple</span><span class="p">)</span>   <span class="c1"># Set date &amp; time, ignoring weekday</span>
<span class="n">date_time</span> <span class="o">=</span> <span class="n">rtc</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>           <span class="c1"># Return date &amp; time in Unix order.</span>
<span class="n">rtc</span><span class="o">.</span><span class="n">calibration</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>          <span class="c1"># Set a calibration factor</span>
</pre></div>
</div>
<p>The weekday value set will be ignored and calculated in the returned tuple from the
actual date. rtc.now() is only provided at SAMD51 boards. The value used in the
rtc.calibration() call has a range from -127 - 127. It defines roughly a
ppm quantity, by which the clock can run faster or slower.</p>
</section>
<section id="timers">
<h2>Timers<a class="headerlink" href="#timers" title="Permalink to this heading">¶</a></h2>
<p>The SAMD21/SAMD51 uses software timers. Use the <a class="reference internal" href="../library/machine.Timer.html#machine-timer"><span class="std std-ref">machine.Timer</span></a> class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Timer</span>

<span class="n">tim0</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>
<span class="n">tim0</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Timer</span><span class="o">.</span><span class="n">ONE_SHOT</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span><span class="nb">print</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="n">tim1</span> <span class="o">=</span> <span class="n">Timer</span><span class="p">()</span>
<span class="n">tim1</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">period</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Timer</span><span class="o">.</span><span class="n">PERIODIC</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="k">lambda</span> <span class="n">t</span><span class="p">:</span><span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<p>The period is in milliseconds.</p>
</section>
<section id="pins-and-gpio">
<span id="samd-pins-and-gpio"></span><h2>Pins and GPIO<a class="headerlink" href="#pins-and-gpio" title="Permalink to this heading">¶</a></h2>
<p>Use the <a class="reference internal" href="../library/machine.Pin.html#machine-pin"><span class="std std-ref">machine.Pin</span></a> class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>

<span class="n">p0</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D0&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span> <span class="c1"># create output pin on GPIO0</span>
<span class="n">p0</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>                 <span class="c1"># set pin to &quot;on&quot; (high) level</span>
<span class="n">p0</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>                <span class="c1"># set pin to &quot;off&quot; (low) level</span>
<span class="n">p0</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>             <span class="c1"># set pin to on/high</span>

<span class="n">p2</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D2&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">)</span>  <span class="c1"># create input pin on GPIO2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">value</span><span class="p">())</span>       <span class="c1"># get value, 0 or 1</span>

<span class="n">p4</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">IN</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">PULL_UP</span><span class="p">)</span> <span class="c1"># enable internal pull-up resistor</span>
<span class="n">p7</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;PA07&#39;</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># set pin high on creation</span>
</pre></div>
</div>
<p>Pins can be denoted by a string or a number. The string is either the
pin label of the respective board, like “D0” or “SDA”, or in the form
“Pxnn”, where x is A,B,C or D, and nn a two digit number in the range 0-31.
Examples: “PA03”, PD31”.</p>
<p>Pin numbers are the MCU port numbers in the range:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PA0</span><span class="o">..</span><span class="n">PA31</span><span class="p">:</span>  <span class="mf">0..31</span>
<span class="n">PB0</span><span class="o">..</span><span class="n">PB31</span><span class="p">:</span> <span class="mf">32..63</span>
<span class="n">PC0</span><span class="o">..</span><span class="n">PC31</span><span class="p">:</span> <span class="mf">64..95</span>
<span class="n">PD0</span><span class="o">..</span><span class="n">PD31</span><span class="p">:</span> <span class="mf">96..127</span>
</pre></div>
</div>
<p>Note: On Adafruit Feather and ItsyBity boards, pin D5 is connected to an external
gate output and can therefore only be used as input.</p>
</section>
<section id="uart-serial-bus">
<h2>UART (serial bus)<a class="headerlink" href="#uart-serial-bus" title="Permalink to this heading">¶</a></h2>
<p>See <a class="reference internal" href="../library/machine.UART.html#machine-uart"><span class="std std-ref">machine.UART</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use UART 3 on a ItsyBitsy M4 board</span>
<span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">UART</span>

<span class="n">uart3</span> <span class="o">=</span> <span class="n">UART</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">tx</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D1&#39;</span><span class="p">),</span> <span class="n">rx</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D0&#39;</span><span class="p">),</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">115200</span><span class="p">)</span>
<span class="n">uart3</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>  <span class="c1"># write 5 bytes</span>
<span class="n">uart3</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>         <span class="c1"># read up to 5 bytes</span>
</pre></div>
</div>
<p>The SAMD21/SAMD51 MCUs have up to eight hardware so called SERCOM devices, which can be used as UART,
SPI or I2C device, but not every MCU variant and board exposes all
TX and RX pins for users. For the assignment of Pins to devices and UART signals,
refer to the <a class="reference internal" href="pinout.html#samd-pinout"><span class="std std-ref">SAMD pinout</span></a>.</p>
</section>
<section id="pwm-pulse-width-modulation">
<h2>PWM (pulse width modulation)<a class="headerlink" href="#pwm-pulse-width-modulation" title="Permalink to this heading">¶</a></h2>
<p>Up to five timer device of the SAMD21/SAMD51 MCUs are used for creating PWM signals.</p>
<p>The PWM functions are provided by the <a class="reference internal" href="../library/machine.PWM.html#machine-pwm"><span class="std std-ref">machine.PWM</span></a> class.
It supports all basic methods listed for that class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Samples for Adafruit ItsyBitsy M4 Express</span>

<span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">PWM</span>

<span class="c1"># create PWM object from a pin and set the frequency and duty cycle</span>
<span class="n">pwm</span> <span class="o">=</span> <span class="n">PWM</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D7&#39;</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="mi">2000</span><span class="p">,</span> <span class="n">duty_u16</span><span class="o">=</span><span class="mi">32768</span><span class="p">)</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">freq</span><span class="p">()</span>             <span class="c1"># get the current frequency</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>         <span class="c1"># set/change the frequency</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">()</span>         <span class="c1"># get the current duty cycle, range 0-65535</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">duty_u16</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>      <span class="c1"># set the duty cycle, range 0-65535</span>
<span class="n">pwm</span><span class="o">.</span><span class="n">deinit</span><span class="p">()</span>           <span class="c1"># turn off PWM on the pin</span>

<span class="n">pwm</span>                    <span class="c1"># show the PWM objects properties</span>
</pre></div>
</div>
<section id="pwm-constructor">
<h3>PWM Constructor<a class="headerlink" href="#pwm-constructor" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">PWM</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duty_u16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">duty_ns</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span></em><span class="sig-paren">)</span></dt>
<dd><blockquote>
<div><p>Construct and return a new PWM object using the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>dest</em> is the Pin object on which the PWM is output.</p></li>
</ul>
</div></blockquote>
<p>PWM objects are provided by TCC timer module. The TCC timer modules have up
to six channels and eight outputs. All channels of a module run at the same
frequency, but allow for different duty cycles. Outputs are assigned to channels
in modulo-n fashion, where n is the number of channels. Outputs of a channel
have the same frequency and duty rate, but may have different polarity.
So if for instance a module has four channels, output 0 and 4, 1 and 5,
2 and 6, 3, and 7 share the same frequency and duty rate.</p>
<p>Only one of <em>duty_u16</em> and <em>duty_ns</em> should be specified at a time.</p>
<p>Keyword arguments:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>freq</em> should be an integer which sets the frequency in Hz for the
PWM cycle. The valid frequency range is 1 Hz to 24 MHz.</p></li>
<li><p><em>duty_u16</em> sets the duty cycle as a ratio <code class="docutils literal notranslate"><span class="pre">duty_u16</span> <span class="pre">/</span> <span class="pre">65536</span></code>.</p></li>
<li><p><em>duty_ns</em> sets the pulse width in nanoseconds. The limitation for X channels
apply as well.</p></li>
<li><p><em>invert</em>=True|False. Setting a bit inverts the respective output.</p></li>
<li><p><em>device</em>=n Use TCC module n if available. At some pins two TCC modules could be
used. If not device is mentioned, the software tries to use a module which is not yet
used for a PWM signal. But if pins shall have the same frequency and/or duty cycle
to be changed synchronously, they must be driven by the same TCC module.</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</dd></dl>

</section>
<section id="pwm-methods">
<h3>PWM Methods<a class="headerlink" href="#pwm-methods" title="Permalink to this heading">¶</a></h3>
<p>The methods are identical to the generic <a class="reference internal" href="../library/machine.PWM.html#machine-pwm"><span class="std std-ref">machine.PWM</span></a> class,
with additional keyword arguments to the init() method, matchings those of the constructor.</p>
</section>
<section id="pwm-pin-assignment">
<h3>PWM Pin Assignment<a class="headerlink" href="#pwm-pin-assignment" title="Permalink to this heading">¶</a></h3>
<p>Pins are specified in the same way as for the Pin class.  For the assignment of Pins
to PWM signals, refer to the <a class="reference internal" href="pinout.html#samd-pinout"><span class="std std-ref">SAMD pinout</span></a>.</p>
</section>
</section>
<section id="adc-analog-to-digital-conversion">
<h2>ADC (analog to digital conversion)<a class="headerlink" href="#adc-analog-to-digital-conversion" title="Permalink to this heading">¶</a></h2>
<p>On the SAMD21/SAMD51 ADC functionality is available on Pins labelled ‘Ann’.</p>
<p>Use the <a class="reference internal" href="../library/machine.ADC.html#machine-adc"><span class="std std-ref">machine.ADC</span></a> class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">ADC</span>

<span class="n">adc0</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;A0&#39;</span><span class="p">))</span>            <span class="c1"># create ADC object on ADC pin, average=16</span>
<span class="n">adc0</span><span class="o">.</span><span class="n">read_u16</span><span class="p">()</span>                  <span class="c1"># read value, 0-65536 across voltage range 0.0v - 3.3v</span>
<span class="n">adc1</span> <span class="o">=</span> <span class="n">ADC</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;A1&#39;</span><span class="p">),</span> <span class="n">average</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># create ADC object on ADC pin, average=1</span>
</pre></div>
</div>
<p>The resolution of the ADC is 12 bit with 12 bit accuracy, irrespective of the
value returned by read_u16(). If you need a higher resolution or better accuracy, use
an external ADC.</p>
<section id="adc-constructor">
<h3>ADC Constructor<a class="headerlink" href="#adc-constructor" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ADC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dest</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">average</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">n</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>Construct and return a new ADC object using the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>dest</em> is the Pin object on which the ADC is output.</p></li>
</ul>
</div></blockquote>
<p>Keyword arguments:</p>
<blockquote>
<div><ul>
<li><p><em>average</em> is used to reduce the noise. With a value of 16 the LSB noise is about 1 digit.</p></li>
<li><p><em>vref</em> sets the reference voltage for the ADC.</p>
<p>The default setting is for 3.3V. Other values are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>vref</p></th>
<th class="head"><p>SAMD21</p></th>
<th class="head"><p>SAMD51</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>1.0V voltage reference</p></td>
<td><p>internal bandgap reference (1V)</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>1/1.48 Analogue voltage supply</p></td>
<td><p>Analogue voltage supply</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>1/2 Analogue voltage supply</p></td>
<td><p>1/2 Analogue voltage supply</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>External reference A</p></td>
<td><p>External reference A</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>External reference B</p></td>
<td><p>External reference B</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>External reference C</p></td>
</tr>
</tbody>
</table>
</li>
</ul>
</div></blockquote>
</section>
<section id="adc-methods">
<h3>ADC Methods<a class="headerlink" href="#adc-methods" title="Permalink to this heading">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="read_u16">
<span class="sig-name descname"><span class="pre">read_u16</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#read_u16" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Read a single ADC value as unsigned 16 bit quantity. The voltage range is defined
by the vref option of the constructor, the resolutions by the bits option.</p>
</section>
</section>
<section id="dac-digital-to-analog-conversion">
<h2>DAC (digital to analog conversion)<a class="headerlink" href="#dac-digital-to-analog-conversion" title="Permalink to this heading">¶</a></h2>
<p>The DAC class provides a fast digital to analog conversion. Usage example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">DAC</span>

<span class="n">dac0</span> <span class="o">=</span> <span class="n">DAC</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>                    <span class="c1"># create DAC object on DAC pin A0</span>
<span class="n">dac0</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">1023</span><span class="p">)</span>                 <span class="c1"># write value, 0-4095 across voltage range 0.0v - 3.3v</span>
<span class="n">dac1</span> <span class="o">=</span> <span class="n">DAC</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                    <span class="c1"># create DAC object on DAC pin A1</span>
<span class="n">dac1</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>                 <span class="c1"># write value, 0-4095 across voltage range 0.0v - 3.3v</span>
</pre></div>
</div>
<p>The resolution of the DAC is 12 bit for SAMD51 and 10 bit for SAMD21. SAMD21 devices
have 1 DAC channel at GPIO PA02, SAMD51 devices have 2 DAC channels at GPIO PA02 and PA05.</p>
<section id="dac-constructor">
<h3>DAC Constructor<a class="headerlink" href="#dac-constructor" title="Permalink to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DAC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vref</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>The vref arguments defines the output voltage range, the callback option is used for
dac_timed(). Suitable values for vref are:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>vref</p></th>
<th class="head"><p>SAMD21</p></th>
<th class="head"><p>SAMD51</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>Internal voltage reference</p></td>
<td><p>Internal bandgap reference (~1V)</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>Analogue voltage supply</p></td>
<td><p>Analogue voltage supply</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>External reference</p></td>
<td><p>Unbuffered external reference</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><ul class="simple">
<li></li>
</ul>
</td>
<td><p>Buffered external reference</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dac-methods">
<h3>DAC Methods<a class="headerlink" href="#dac-methods" title="Permalink to this heading">¶</a></h3>
<dl class="py method">
<dt class="sig sig-object py" id="write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Write a single value to the selected DAC output. The value range is 0-1023 for
SAMD21 and 0-4095 for SAMD51. The voltage range depends on the vref setting.</p>
</section>
</section>
<section id="software-spi-bus">
<h2>Software SPI bus<a class="headerlink" href="#software-spi-bus" title="Permalink to this heading">¶</a></h2>
<p>Software SPI (using bit-banging) works on all pins, and is accessed via the
<a class="reference internal" href="../library/machine.SPI.html#machine-softspi"><span class="std std-ref">machine.SoftSPI</span></a> class.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SoftSPI</span>

<span class="c1"># construct a SoftSPI bus on the given pins</span>
<span class="c1"># polarity is the idle state of SCK</span>
<span class="c1"># phase=0 means sample on the first edge of SCK, phase=1 means the second</span>
<span class="n">spi</span> <span class="o">=</span> <span class="n">SoftSPI</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">100000</span><span class="p">,</span> <span class="n">polarity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">phase</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sck</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D7&#39;</span><span class="p">),</span> <span class="n">mosi</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D9&#39;</span><span class="p">),</span> <span class="n">miso</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D10&#39;</span><span class="p">))</span>

<span class="n">spi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">baudrate</span><span class="o">=</span><span class="mi">200000</span><span class="p">)</span> <span class="c1"># set the baud rate</span>

<span class="n">spi</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>            <span class="c1"># read 10 bytes on MISO</span>
<span class="n">spi</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span>      <span class="c1"># read 10 bytes while outputting 0xff on MOSI</span>

<span class="n">buf</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>     <span class="c1"># create a buffer</span>
<span class="n">spi</span><span class="o">.</span><span class="n">readinto</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span>       <span class="c1"># read into the given buffer (reads 50 bytes in this case)</span>
<span class="n">spi</span><span class="o">.</span><span class="n">readinto</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="mh">0xff</span><span class="p">)</span> <span class="c1"># read into the given buffer and output 0xff on MOSI</span>

<span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;12345&#39;</span><span class="p">)</span>     <span class="c1"># write 5 bytes on MOSI</span>

<span class="n">buf</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>      <span class="c1"># create a buffer</span>
<span class="n">spi</span><span class="o">.</span><span class="n">write_readinto</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;1234&#39;</span><span class="p">,</span> <span class="n">buf</span><span class="p">)</span> <span class="c1"># write to MOSI and read from MISO into the buffer</span>
<span class="n">spi</span><span class="o">.</span><span class="n">write_readinto</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">buf</span><span class="p">)</span> <span class="c1"># write buf to MOSI and read MISO back into buf</span>
</pre></div>
</div>
<p>The highest supported baud rate is 500000.</p>
</section>
<section id="hardware-spi-bus">
<h2>Hardware SPI bus<a class="headerlink" href="#hardware-spi-bus" title="Permalink to this heading">¶</a></h2>
<p>The SAMD21/SAMD51 MCUs have up to eight hardware so called SERCOM devices, which can be used as UART,
SPI or I2C device, but not every MCU variant and board exposes all
signal pins for users.  Hardware SPI is accessed via the
<a class="reference internal" href="../library/machine.SPI.html#machine-spi"><span class="std std-ref">machine.SPI</span></a> class and has the same methods as software SPI above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">SPI</span>

<span class="n">spi</span> <span class="o">=</span> <span class="n">SPI</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">sck</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s2">&quot;SCK&quot;</span><span class="p">),</span> <span class="n">mosi</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s2">&quot;MOSI&quot;</span><span class="p">),</span> <span class="n">miso</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s2">&quot;MISO&quot;</span><span class="p">),</span> <span class="n">baudrate</span><span class="o">=</span><span class="mi">10000000</span><span class="p">)</span>
<span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello World&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If miso is not specified, it is not used. For the assignment of Pins to SPI devices and signals, refer to
<a class="reference internal" href="pinout.html#samd-pinout"><span class="std std-ref">SAMD pinout</span></a>.</p>
<p>Note: Even if the highest reliable baud rate at the moment is about 24 Mhz,
setting a baud rate will not always result in exactly that frequency, especially
at high baud rates.</p>
</section>
<section id="software-i2c-bus">
<h2>Software I2C bus<a class="headerlink" href="#software-i2c-bus" title="Permalink to this heading">¶</a></h2>
<p>Software I2C (using bit-banging) works on all output-capable pins, and is
accessed via the <a class="reference internal" href="../library/machine.I2C.html#machine-softi2c"><span class="std std-ref">machine.SoftI2C</span></a> class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span><span class="p">,</span> <span class="n">SoftI2C</span>

<span class="n">i2c</span> <span class="o">=</span> <span class="n">SoftI2C</span><span class="p">(</span><span class="n">scl</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D10&#39;</span><span class="p">),</span> <span class="n">sda</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D11&#39;</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span>

<span class="n">i2c</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>              <span class="c1"># scan for devices</span>

<span class="n">i2c</span><span class="o">.</span><span class="n">readfrom</span><span class="p">(</span><span class="mh">0x3a</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>   <span class="c1"># read 4 bytes from device with address 0x3a</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="mh">0x3a</span><span class="p">,</span> <span class="s1">&#39;12&#39;</span><span class="p">)</span> <span class="c1"># write &#39;12&#39; to device with address 0x3a</span>

<span class="n">buf</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>     <span class="c1"># create a buffer with 10 bytes</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="mh">0x3a</span><span class="p">,</span> <span class="n">buf</span><span class="p">)</span>  <span class="c1"># write the given buffer to the slave</span>
</pre></div>
</div>
<p>The highest supported freq is 400000.</p>
</section>
<section id="hardware-i2c-bus">
<h2>Hardware I2C bus<a class="headerlink" href="#hardware-i2c-bus" title="Permalink to this heading">¶</a></h2>
<p>The SAMD21/SAMD51 MCUs have up to eight hardware so called SERCOM devices,
which can be used as UART, SPI or I2C device, but not every MCU variant
and board exposes all signal pins for users.
For the assignment of Pins to devices and I2C signals, refer to <a class="reference internal" href="pinout.html#samd-pinout"><span class="std std-ref">SAMD pinout</span></a>.</p>
<p>Hardware I2C is accessed via the <a class="reference internal" href="../library/machine.I2C.html#machine-i2c"><span class="std std-ref">machine.I2C</span></a> class and
has the same methods as software SPI above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">I2C</span>

<span class="n">i2c</span> <span class="o">=</span> <span class="n">I2C</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">scl</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s2">&quot;SCL&quot;</span><span class="p">),</span> <span class="n">sda</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s2">&quot;SDA&quot;</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="mi">400_000</span><span class="p">)</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="mh">0x76</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;Hello World&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="onewire-driver">
<h2>OneWire driver<a class="headerlink" href="#onewire-driver" title="Permalink to this heading">¶</a></h2>
<p>The OneWire driver is implemented in software and works on all pins:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
<span class="kn">import</span> <span class="nn">onewire</span>

<span class="n">ow</span> <span class="o">=</span> <span class="n">onewire</span><span class="o">.</span><span class="n">OneWire</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D12&#39;</span><span class="p">))</span> <span class="c1"># create a OneWire bus on GPIO12</span>
<span class="n">ow</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>                     <span class="c1"># return a list of devices on the bus</span>
<span class="n">ow</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>                    <span class="c1"># reset the bus</span>
<span class="n">ow</span><span class="o">.</span><span class="n">readbyte</span><span class="p">()</span>                 <span class="c1"># read a byte</span>
<span class="n">ow</span><span class="o">.</span><span class="n">writebyte</span><span class="p">(</span><span class="mh">0x12</span><span class="p">)</span>            <span class="c1"># write a byte on the bus</span>
<span class="n">ow</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>               <span class="c1"># write bytes on the bus</span>
<span class="n">ow</span><span class="o">.</span><span class="n">select_rom</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;12345678&#39;</span><span class="p">)</span>    <span class="c1"># select a specific device by its ROM code</span>
</pre></div>
</div>
<p>There is a specific driver for DS18S20 and DS18B20 devices:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">ds18x20</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">ds18x20</span><span class="o">.</span><span class="n">DS18X20</span><span class="p">(</span><span class="n">ow</span><span class="p">)</span>
<span class="n">roms</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>
<span class="n">ds</span><span class="o">.</span><span class="n">convert_temp</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">750</span><span class="p">)</span>
<span class="k">for</span> <span class="n">rom</span> <span class="ow">in</span> <span class="n">roms</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">read_temp</span><span class="p">(</span><span class="n">rom</span><span class="p">))</span>
</pre></div>
</div>
<p>Be sure to put a 4.7k pull-up resistor on the data line.  Note that
the <code class="docutils literal notranslate"><span class="pre">convert_temp()</span></code> method must be called each time you want to
sample the temperature.</p>
</section>
<section id="dht-driver">
<h2>DHT driver<a class="headerlink" href="#dht-driver" title="Permalink to this heading">¶</a></h2>
<p>The DHT driver is implemented in software and works on all pins:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dht</span>
<span class="kn">import</span> <span class="nn">machine</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">dht</span><span class="o">.</span><span class="n">DHT11</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">))</span>
<span class="n">d</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">temperature</span><span class="p">()</span> <span class="c1"># eg. 23 (°C)</span>
<span class="n">d</span><span class="o">.</span><span class="n">humidity</span><span class="p">()</span>    <span class="c1"># eg. 41 (% RH)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">dht</span><span class="o">.</span><span class="n">DHT22</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D4&#39;</span><span class="p">))</span>
<span class="n">d</span><span class="o">.</span><span class="n">measure</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">temperature</span><span class="p">()</span> <span class="c1"># eg. 23.6 (°C)</span>
<span class="n">d</span><span class="o">.</span><span class="n">humidity</span><span class="p">()</span>    <span class="c1"># eg. 41.3 (% RH)</span>
</pre></div>
</div>
<p>Be sure to have a 4.7k pull-up resistor on the data line.  Some
DHT modules may already have one.</p>
</section>
<section id="driving-an-apa102-led">
<h2>Driving an APA102 LED<a class="headerlink" href="#driving-an-apa102-led" title="Permalink to this heading">¶</a></h2>
<p>The APA102 on some Adafruit boards can be controlled using SoftSPI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">SoftSPI</span><span class="p">,</span> <span class="n">Pin</span>
<span class="c1"># create the SPI object. miso can be any unused pin.</span>
<span class="n">spi</span><span class="o">=</span><span class="n">SoftSPI</span><span class="p">(</span><span class="n">sck</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D25&#39;</span><span class="p">),</span> <span class="n">mosi</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D26&#39;</span><span class="p">),</span> <span class="n">miso</span><span class="o">=</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D14&#39;</span><span class="p">))</span>

<span class="c1"># define a little function that writes the data with</span>
<span class="c1"># preamble and postfix</span>
<span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">red</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">blue</span><span class="p">):</span>
    <span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\x00\x00\x00\x00\xff</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">((</span><span class="n">blue</span><span class="p">,</span> <span class="n">green</span><span class="p">,</span> <span class="n">red</span><span class="p">)))</span>
    <span class="n">spi</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;</span><span class="se">\xff\xff\xff</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># set the LED to red</span>
<span class="n">write</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Since SoftSPI does not allow miso to be undefined, miso has to be
assigned to an otherwise unused pin.</p>
</section>
<section id="driving-a-neopixel-led">
<h2>Driving a Neopixel LED<a class="headerlink" href="#driving-a-neopixel-led" title="Permalink to this heading">¶</a></h2>
<p>The built-in machine.bitstream() method supports driving Neopixel LEDs in combination
with the Neopixel driver from the MicroPython driver library:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">neopixel</span>
<span class="kn">import</span> <span class="nn">machine</span>

<span class="c1"># 1 LED connected to Pin D8 on Adafruit Feather boards</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="s1">&#39;D8&#39;</span><span class="p">,</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">neopixel</span><span class="o">.</span><span class="n">NeoPixel</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># set the led to red.</span>
<span class="n">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="c1"># Update the LED.</span>
<span class="n">n</span><span class="o">.</span><span class="n">write</span><span class="p">()</span>
</pre></div>
</div>
<p>machine.bitstream() is set up for a SAMD21 clock frequency of 48MHz and a SAMD51
clock frequency of 120 MHz. At other clock frequencies, the timing will not fit.</p>
</section>
<section id="transferring-files">
<h2>Transferring files<a class="headerlink" href="#transferring-files" title="Permalink to this heading">¶</a></h2>
<p>Files can be transferred to the SAMD21/SAMD51 devices for instance with the
<a class="reference internal" href="../reference/mpremote.html#mpremote"><span class="std std-ref">mpremote</span></a> tool. See the MicroPython forum for community-supported
alternatives to transfer files to an SAMD21/SAMD51 board, like rshell or Thonny.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 05 Mar 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>