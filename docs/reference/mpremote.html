
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>MicroPython remote control: mpremote &#8212; MicroPython 1.19 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MicroPython .mpy files" href="mpyfiles.html" />
    <link rel="prev" title="The MicroPython Interactive Interpreter Mode (aka REPL)" href="repl.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mpyfiles.html" title="MicroPython .mpy files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="repl.html" title="The MicroPython Interactive Interpreter Mode (aka REPL)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython 1.19 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">MicroPython language and implementation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="micropython-remote-control-mpremote">
<h1>MicroPython remote control: mpremote<a class="headerlink" href="#micropython-remote-control-mpremote" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> command line tool provides an integrated set of utilities to
remotely interact with and automate a MicroPython device over a serial
connection.</p>
<p>To use mpremote install it via <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install mpremote
</pre></div>
</div>
<p>The simplest way to use this tool is just by invoking it without any arguments:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpremote
</pre></div>
</div>
<p>This command automatically detects and connects to the first available serial
device and provides an interactive REPL.  Serial ports are opened in exclusive
mode, so running a second (or third, etc) instance of <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> will connect
to subsequent serial devices, if any are available.</p>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<p>For REPL access, running <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> without any arguments is usually all that
is needed.  <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> also supports a set of commands given at the command
line which will perform various actions on remote MicroPython devices.</p>
<p>The full list of supported commands are:</p>
<ul>
<li><p>connect to a specified device via a device-name shortcut:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote &lt;device-shortcut&gt;
</pre></div>
</div>
</li>
<li><p>connect to specified device via name:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote connect &lt;device&gt;
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;device&gt;</span></code> may be one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code>: list available devices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code>: connect to the first available device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id:&lt;serial&gt;</span></code>: connect to the device with USB serial number
<code class="docutils literal notranslate"><span class="pre">&lt;serial&gt;</span></code> (the second entry in the output from the <code class="docutils literal notranslate"><span class="pre">connect</span> <span class="pre">list</span></code>
command)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">port:&lt;path&gt;</span></code>: connect to the device with the given path</p></li>
<li><p>any valid device name/path, to connect to that device</p></li>
</ul>
</li>
<li><p>disconnect current device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote disconnect
</pre></div>
</div>
<p>After a disconnect, auto soft-reset is enabled.</p>
</li>
<li><p>resume a previous <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> session:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote resume
</pre></div>
</div>
<p>This disables auto soft-reset.</p>
</li>
<li><p>perform a soft-reset of the device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote soft-reset
</pre></div>
</div>
<p>This will clear out the Python heap and restart the interpreter.  It also
disables auto soft-reset.</p>
</li>
<li><p>enter the REPL on the connected device:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote repl <span class="o">[</span>options<span class="o">]</span>
</pre></div>
</div>
</div></blockquote>
<p>Options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--capture</span> <span class="pre">&lt;file&gt;</span></code>, to capture output of the REPL session to the given
file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--inject-code</span> <span class="pre">&lt;string&gt;</span></code>, to specify characters to inject at the REPL when
Ctrl-J is pressed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--inject-file</span> <span class="pre">&lt;file&gt;</span></code>, to specify a file to inject at the REPL when
Ctrl-K is pressed</p></li>
</ul>
</li>
<li><p>evaluate and print the result of a Python expression:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote <span class="nb">eval</span> &lt;string&gt;
</pre></div>
</div>
</li>
<li><p>execute the given Python code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote <span class="nb">exec</span> &lt;string&gt;
</pre></div>
</div>
</li>
<li><p>run a script from the local filesystem:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote run &lt;file&gt;
</pre></div>
</div>
</li>
<li><p>execute filesystem commands on the device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote fs &lt;command&gt;
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> may be:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">&lt;file..&gt;</span></code> to show the contents of a file or files on the device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ls</span></code> to list the current directory</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">&lt;dirs...&gt;</span></code> to list the given directories</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">[-r]</span> <span class="pre">&lt;src...&gt;</span> <span class="pre">&lt;dest&gt;</span></code> to copy files; use “:” as a prefix to specify
a file on the device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rm</span> <span class="pre">&lt;src...&gt;</span></code> to remove files on the device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mkdir</span> <span class="pre">&lt;dirs...&gt;</span></code> to create directories on the device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rmdir</span> <span class="pre">&lt;dirs...&gt;</span></code> to remove directories on the device</p></li>
</ul>
</li>
<li><p>edit a file on the device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote edit &lt;files...&gt;
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">edit</span></code> command will copy each file from the device to a local temporary
directory and then launch your editor for each file (defined by the environment
variable <code class="docutils literal notranslate"><span class="pre">$EDITOR</span></code>). If the editor exits successfully, the updated file will
be copied back to the device.</p>
</li>
<li><p>install packages from <a class="reference internal" href="glossary.html#term-micropython-lib"><span class="xref std std-term">micropython-lib</span></a> (or GitHub) using the <code class="docutils literal notranslate"><span class="pre">mip</span></code> tool:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote mip install &lt;packages...&gt;
</pre></div>
</div>
<p>See <a class="reference internal" href="packages.html#packages"><span class="std std-ref">Package management</span></a> for more information.</p>
</li>
<li><p>mount the local directory on the remote device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote mount <span class="o">[</span>options<span class="o">]</span> &lt;local-dir&gt;
</pre></div>
</div>
<p>During usage, Ctrl-D will soft-reboot and normally reconnect the mount automatically.
If the unit has a main.py running at startup however the remount cannot occur.
In this case a raw mode soft reboot can be used: Ctrl-A Ctrl-D to reboot,
then Ctrl-B to get back to normal repl at which point the mount will be ready.</p>
<p>Options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-l</span></code>, <code class="docutils literal notranslate"><span class="pre">--unsafe-links</span></code>: By default an error will be raised if the device
accesses a file or directory which is outside (up one or more directory levels) the
local directory that is mounted.  This option disables this check for symbolic
links, allowing the device to follow symbolic links outside of the local directory.</p></li>
</ul>
</li>
<li><p>unmount the local directory from the remote device:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mpremote umount
</pre></div>
</div>
</li>
</ul>
<p>Multiple commands can be specified and they will be run sequentially.</p>
</div>
<div class="section" id="auto-connection-and-soft-reset">
<h2>Auto connection and soft-reset<a class="headerlink" href="#auto-connection-and-soft-reset" title="Permalink to this headline">¶</a></h2>
<p>Connection and disconnection will be done automatically at the start and end of
the execution of the tool, if such commands are not explicitly given.  Automatic
connection will search for the first available serial device. If no action is
specified then the REPL will be entered.</p>
<p>Once connected to a device, <code class="docutils literal notranslate"><span class="pre">mpremote</span></code> will automatically soft-reset the
device if needed.  This clears the Python heap and restarts the interpreter,
making sure that subsequent Python code executes in a fresh environment.  Auto
soft-reset is performed the first time one of the following commands are
executed: <code class="docutils literal notranslate"><span class="pre">mount</span></code>, <code class="docutils literal notranslate"><span class="pre">eval</span></code>, <code class="docutils literal notranslate"><span class="pre">exec</span></code>, <code class="docutils literal notranslate"><span class="pre">run</span></code>, <code class="docutils literal notranslate"><span class="pre">fs</span></code>.  After doing a
soft-reset for the first time, it will not be done again automatically, until a
<code class="docutils literal notranslate"><span class="pre">disconnect</span></code> command is issued.</p>
<p>Auto soft-reset behaviour can be controlled by the <code class="docutils literal notranslate"><span class="pre">resume</span></code> command.  And the
<code class="docutils literal notranslate"><span class="pre">soft-reset</span></code> command can be used to perform an explicit soft reset.</p>
</div>
<div class="section" id="shortcuts">
<h2>Shortcuts<a class="headerlink" href="#shortcuts" title="Permalink to this headline">¶</a></h2>
<p>Shortcuts can be defined using the macro system.  Built-in shortcuts are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>- ``devs``: list available devices (shortcut for ``connect list``)
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a0</span></code>, <code class="docutils literal notranslate"><span class="pre">a1</span></code>, <code class="docutils literal notranslate"><span class="pre">a2</span></code>, <code class="docutils literal notranslate"><span class="pre">a3</span></code>: connect to /dev/ttyACM?</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">u0</span></code>, <code class="docutils literal notranslate"><span class="pre">u1</span></code>, <code class="docutils literal notranslate"><span class="pre">u2</span></code>, <code class="docutils literal notranslate"><span class="pre">u3</span></code>: connect to /dev/ttyUSB?</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c0</span></code>, <code class="docutils literal notranslate"><span class="pre">c1</span></code>, <code class="docutils literal notranslate"><span class="pre">c2</span></code>, <code class="docutils literal notranslate"><span class="pre">c3</span></code>: connect to COM?</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cat</span></code>, <code class="docutils literal notranslate"><span class="pre">ls</span></code>, <code class="docutils literal notranslate"><span class="pre">cp</span></code>, <code class="docutils literal notranslate"><span class="pre">rm</span></code>, <code class="docutils literal notranslate"><span class="pre">mkdir</span></code>, <code class="docutils literal notranslate"><span class="pre">rmdir</span></code>, <code class="docutils literal notranslate"><span class="pre">df</span></code>: filesystem
commands</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reset</span></code>: reset the device</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bootloader</span></code>: make the device enter its bootloader</p></li>
</ul>
<p>Any user configuration, including user-defined shortcuts, can be placed in the file
<code class="docutils literal notranslate"><span class="pre">.config/mpremote/config.py</span></code>. For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">commands</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;c33&quot;</span><span class="p">:</span> <span class="s2">&quot;connect id:334D335C3138&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bl&quot;</span><span class="p">:</span> <span class="s2">&quot;bootloader&quot;</span><span class="p">,</span>
    <span class="s2">&quot;double x=4&quot;</span><span class="p">:</span> <span class="s2">&quot;eval x*2&quot;</span><span class="p">,</span>  <span class="c1"># x is an argument, with default 4</span>
    <span class="s2">&quot;wl_scan&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;exec&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">import network</span>
<span class="s2">wl = network.WLAN()</span>
<span class="s2">wl.active(1)</span>
<span class="s2">for ap in wl.scan():</span>
<span class="s2">    print(ap)</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,],</span>
    <span class="s2">&quot;test&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mount&quot;</span><span class="p">,</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;exec&quot;</span><span class="p">,</span> <span class="s2">&quot;import test&quot;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpremote

mpremote a1

mpremote connect /dev/ttyUSB0 repl

mpremote ls

mpremote a1 ls

mpremote <span class="nb">exec</span> <span class="s2">&quot;import micropython; micropython.mem_info()&quot;</span>

mpremote <span class="nb">eval</span> <span class="m">1</span>/2 <span class="nb">eval</span> <span class="m">3</span>/4

mpremote mount .

mpremote mount . <span class="nb">exec</span> <span class="s2">&quot;import local_script&quot;</span>

mpremote ls

mpremote cat boot.py

mpremote cp :main.py .

mpremote cp main.py :

mpremote cp :a.py :b.py

mpremote cp -r dir/ :

mpremote cp a.py b.py : + repl

mpremote mip install aioble

mpremote mip install github:org/repo@branch

mpremote mip install --target /flash/third-party functools
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/web-logo-sticky.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">MicroPython remote control: mpremote</a><ul>
<li><a class="reference internal" href="#commands">Commands</a></li>
<li><a class="reference internal" href="#auto-connection-and-soft-reset">Auto connection and soft-reset</a></li>
<li><a class="reference internal" href="#shortcuts">Shortcuts</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="repl.html"
                        title="previous chapter">The MicroPython Interactive Interpreter Mode (aka REPL)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mpyfiles.html"
                        title="next chapter">MicroPython .mpy files</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/mpremote.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mpyfiles.html" title="MicroPython .mpy files"
             >next</a> |</li>
        <li class="right" >
          <a href="repl.html" title="The MicroPython Interactive Interpreter Mode (aka REPL)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython 1.19 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MicroPython language and implementation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2023, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 02 May 2023.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>