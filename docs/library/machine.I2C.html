<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>class I2C – a two-wire serial protocol &mdash; MicroPython latest documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="class I2S – Inter-IC Sound bus protocol" href="machine.I2S.html" />
    <link rel="prev" title="class SPI – a Serial Peripheral Interface bus protocol (controller side)" href="machine.SPI.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroPython
              <img src="../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bluetooth.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bluetooth</span></code> — low-level Bluetooth</a></li>
<li class="toctree-l3"><a class="reference internal" href="btree.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">btree</span></code> – simple BTree database</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryptolib.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cryptolib</span></code> – cryptographic ciphers</a></li>
<li class="toctree-l3"><a class="reference internal" href="framebuf.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">framebuf</span></code> — frame buffer manipulation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="machine.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">machine</span></code> — functions related to the hardware</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="machine.html#memory-access">Memory access</a></li>
<li class="toctree-l4"><a class="reference internal" href="machine.html#reset-related-functions">Reset related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="machine.html#interrupt-related-functions">Interrupt related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="machine.html#power-related-functions">Power related functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="machine.html#miscellaneous-functions">Miscellaneous functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="machine.html#constants">Constants</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="machine.html#classes">Classes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="micropython.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">micropython</span></code> – access and control MicroPython internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="neopixel.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">neopixel</span></code> — control of WS2812 / NeoPixel LEDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="network.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">network</span></code> — network configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="uctypes.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uctypes</span></code> – access binary data in a structured way</a></li>
<li class="toctree-l3"><a class="reference internal" href="mutex.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mutex</span></code> — mutex module</a></li>
<li class="toctree-l3"><a class="reference internal" href="uping.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uping</span></code> — Ping another computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="urequests.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urequests</span></code> — Related functions of HTTP client</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#third-party-libraries-on-the-openmv-cam">Third-party libraries on the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#extending-built-in-libraries-from-python">Extending built-in libraries from Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">MicroPython libraries</a></li>
          <li class="breadcrumb-item"><a href="machine.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">machine</span></code> — functions related to the hardware</a></li>
      <li class="breadcrumb-item active">class I2C – a two-wire serial protocol</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/library/machine.I2C.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="wy-alert wy-alert-danger">
      <p>
        This is the documentation for the latest development branch of
        MicroPython and may refer to features that are not available in released
        versions.
      </p>
      <p>
        If you are looking for the documentation for a specific release, use
        the drop-down menu on the left and select the desired version.
      </p>
    </div>
  
  
           <div itemprop="articleBody">
             
  <section id="class-i2c-a-two-wire-serial-protocol">
<span id="machine-i2c"></span><h1>class I2C – a two-wire serial protocol<a class="headerlink" href="#class-i2c-a-two-wire-serial-protocol" title="Permalink to this heading">¶</a></h1>
<p>I2C is a two-wire protocol for communicating between devices.  At the physical
level it consists of 2 wires: SCL and SDA, the clock and data lines respectively.</p>
<p>I2C objects are created attached to a specific bus.  They can be initialised
when created, or initialised later on.</p>
<p>Printing the I2C object gives you information about its configuration.</p>
<p>Both hardware and software I2C implementations exist via the
<a class="reference internal" href="#machine-i2c"><span class="std std-ref">machine.I2C</span></a> and <a class="reference internal" href="#machine.SoftI2C" title="machine.SoftI2C"><code class="xref any py py-class docutils literal notranslate"><span class="pre">machine.SoftI2C</span></code></a> classes.  Hardware I2C uses
underlying hardware support of the system to perform the reads/writes and is
usually efficient and fast but may have restrictions on which pins can be used.
Software I2C is implemented by bit-banging and can be used on any pin but is not
as efficient.  These classes have the same methods available and differ primarily
in the way they are constructed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The I2C bus requires pull-up circuitry on both SDA and SCL for it’s operation.
Usually these are resistors in the range of 1 - 10 kOhm, connected from each SDA/SCL
to Vcc. Without these, the behaviour is undefined and may range from blocking,
unexpected watchdog reset to just wrong values. Often, this pull-up circuitry
is built-in already to the MCU board or sensor breakout boards, but there is
no rule for that. So please check in case of trouble. See also this excellent
<a class="reference external" href="https://learn.adafruit.com/working-with-i2c-devices/pull-up-resistors">learning guide</a>
by Adafruit about I2C wiring.</p>
</div>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">I2C</span>

<span class="n">i2c</span> <span class="o">=</span> <span class="n">I2C</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">400000</span><span class="p">)</span>          <span class="c1"># create I2C peripheral at frequency of 400kHz</span>
                                <span class="c1"># depending on the port, extra parameters may be required</span>
                                <span class="c1"># to select the peripheral and/or pins to use</span>

<span class="n">i2c</span><span class="o">.</span><span class="n">scan</span><span class="p">()</span>                      <span class="c1"># scan for peripherals, returning a list of 7-bit addresses</span>

<span class="n">i2c</span><span class="o">.</span><span class="n">writeto</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>         <span class="c1"># write 3 bytes to peripheral with 7-bit address 42</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">readfrom</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>             <span class="c1"># read 4 bytes from peripheral with 7-bit address 42</span>

<span class="n">i2c</span><span class="o">.</span><span class="n">readfrom_mem</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>      <span class="c1"># read 3 bytes from memory of peripheral 42,</span>
                                <span class="c1">#   starting at memory-address 8 in the peripheral</span>
<span class="n">i2c</span><span class="o">.</span><span class="n">writeto_mem</span><span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x10</span><span class="s1">&#39;</span><span class="p">)</span> <span class="c1"># write 1 byte to memory of peripheral 42</span>
                                <span class="c1">#   starting at address 2 in the peripheral</span>
</pre></div>
</div>
<section id="constructors">
<h2>Constructors<a class="headerlink" href="#constructors" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="machine.I2C">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machine.</span></span><span class="sig-name descname"><span class="pre">I2C</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sda</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct and return a new I2C object using the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>id</em> identifies a particular I2C peripheral.  Allowed values for
depend on the particular port/board</p></li>
<li><p><em>scl</em> should be a pin object specifying the pin to use for SCL.</p></li>
<li><p><em>sda</em> should be a pin object specifying the pin to use for SDA.</p></li>
<li><p><em>freq</em> should be an integer which sets the maximum frequency
for SCL.</p></li>
<li><p><em>timeout</em> is the maximum time in microseconds to allow for I2C
transactions.  This parameter is not allowed on some ports.</p></li>
</ul>
</div></blockquote>
<p>Note that some ports/boards will have default values of <em>scl</em> and <em>sda</em>
that can be changed in this constructor.  Others will have fixed values
of <em>scl</em> and <em>sda</em> that cannot be changed.</p>
</dd></dl>

<span class="target" id="machine-softi2c"></span><dl class="py class">
<dt class="sig sig-object py" id="machine.SoftI2C">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machine.</span></span><span class="sig-name descname"><span class="pre">SoftI2C</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sda</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.SoftI2C" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new software I2C object.  The parameters are:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>scl</em> should be a pin object specifying the pin to use for SCL.</p></li>
<li><p><em>sda</em> should be a pin object specifying the pin to use for SDA.</p></li>
<li><p><em>freq</em> should be an integer which sets the maximum frequency
for SCL.</p></li>
<li><p><em>timeout</em> is the maximum time in microseconds to wait for clock
stretching (SCL held low by another device on the bus), after
which an <code class="docutils literal notranslate"><span class="pre">OSError(ETIMEDOUT)</span></code> exception is raised.</p></li>
</ul>
</div></blockquote>
</dd></dl>

</section>
<section id="general-methods">
<h2>General Methods<a class="headerlink" href="#general-methods" title="Permalink to this heading">¶</a></h2>
<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.init">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sda</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">400000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise the I2C bus with the given arguments:</p>
<blockquote>
<div><blockquote>
<div><ul class="simple">
<li><p><em>scl</em> is a pin object for the SCL line</p></li>
<li><p><em>sda</em> is a pin object for the SDA line</p></li>
<li><p><em>freq</em> is the SCL clock rate</p></li>
</ul>
</div></blockquote>
<p>In the case of hardware I2C the actual clock frequency may be lower than the
requested frequency. This is dependant on the platform hardware. The actual
rate may be determined by printing the I2C object.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.deinit">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">deinit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.deinit" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn off the I2C bus.</p>
<p>Availability: WiPy.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.scan">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">scan</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan all I2C addresses between 0x08 and 0x77 inclusive and return a list of
those that respond.  A device responds if it pulls the SDA line low after
its address (including a write bit) is sent on the bus.</p>
</dd></dl>

</section>
<section id="primitive-i2c-operations">
<h2>Primitive I2C operations<a class="headerlink" href="#primitive-i2c-operations" title="Permalink to this heading">¶</a></h2>
<p>The following methods implement the primitive I2C controller bus operations and can
be combined to make any I2C transaction.  They are provided if you need more
control over the bus, otherwise the standard methods (see below) can be used.</p>
<p>These methods are only available on the <a class="reference internal" href="#machine.SoftI2C" title="machine.SoftI2C"><code class="xref any py py-class docutils literal notranslate"><span class="pre">machine.SoftI2C</span></code></a> class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.start">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a START condition on the bus (SDA transitions to low while SCL is high).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.stop">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a STOP condition on the bus (SDA transitions to high while SCL is high).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.readinto">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">readinto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nack</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.readinto" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads bytes from the bus and stores them into <em>buf</em>.  The number of bytes
read is the length of <em>buf</em>.  An ACK will be sent on the bus after
receiving all but the last byte.  After the last byte is received, if <em>nack</em>
is true then a NACK will be sent, otherwise an ACK will be sent (and in this
case the peripheral assumes more bytes are going to be read in a later call).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.write">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">buf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the bytes from <em>buf</em> to the bus.  Checks that an ACK is received
after each byte and stops transmitting the remaining bytes if a NACK is
received.  The function returns the number of ACKs that were received.</p>
</dd></dl>

</section>
<section id="standard-bus-operations">
<h2>Standard bus operations<a class="headerlink" href="#standard-bus-operations" title="Permalink to this heading">¶</a></h2>
<p>The following methods implement the standard I2C controller read and write
operations that target a given peripheral device.</p>
<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.readfrom">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">readfrom</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.readfrom" title="Permalink to this definition">¶</a></dt>
<dd><p>Read <em>nbytes</em> from the peripheral specified by <em>addr</em>.
If <em>stop</em> is true then a STOP condition is generated at the end of the transfer.
Returns a <a class="reference internal" href="builtins.html#bytes" title="bytes"><code class="xref any py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object with the data read.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.readfrom_into">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">readfrom_into</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.readfrom_into" title="Permalink to this definition">¶</a></dt>
<dd><p>Read into <em>buf</em> from the peripheral specified by <em>addr</em>.
The number of bytes read will be the length of <em>buf</em>.
If <em>stop</em> is true then a STOP condition is generated at the end of the transfer.</p>
<p>The method returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.writeto">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">writeto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.writeto" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the bytes from <em>buf</em> to the peripheral specified by <em>addr</em>.  If a
NACK is received following the write of a byte from <em>buf</em> then the
remaining bytes are not sent.  If <em>stop</em> is true then a STOP condition is
generated at the end of the transfer, even if a NACK is received.
The function returns the number of ACKs that were received.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.writevto">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">writevto</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.writevto" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the bytes contained in <em>vector</em> to the peripheral specified by <em>addr</em>.
<em>vector</em> should be a tuple or list of objects with the buffer protocol.
The <em>addr</em> is sent once and then the bytes from each object in <em>vector</em>
are written out sequentially.  The objects in <em>vector</em> may be zero bytes
in length in which case they don’t contribute to the output.</p>
<p>If a NACK is received following the write of a byte from one of the
objects in <em>vector</em> then the remaining bytes, and any remaining objects,
are not sent.  If <em>stop</em> is true then a STOP condition is generated at
the end of the transfer, even if a NACK is received.  The function
returns the number of ACKs that were received.</p>
</dd></dl>

</section>
<section id="memory-operations">
<h2>Memory operations<a class="headerlink" href="#memory-operations" title="Permalink to this heading">¶</a></h2>
<p>Some I2C devices act as a memory device (or set of registers) that can be read
from and written to.  In this case there are two addresses associated with an
I2C transaction: the peripheral address and the memory address.  The following
methods are convenience functions to communicate with such devices.</p>
<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.readfrom_mem">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">readfrom_mem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memaddr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nbytes</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addrsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.readfrom_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Read <em>nbytes</em> from the peripheral specified by <em>addr</em> starting from the memory
address specified by <em>memaddr</em>.
The argument <em>addrsize</em> specifies the address size in bits.
Returns a <a class="reference internal" href="builtins.html#bytes" title="bytes"><code class="xref any py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object with the data read.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.readfrom_mem_into">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">readfrom_mem_into</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memaddr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addrsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.readfrom_mem_into" title="Permalink to this definition">¶</a></dt>
<dd><p>Read into <em>buf</em> from the peripheral specified by <em>addr</em> starting from the
memory address specified by <em>memaddr</em>.  The number of bytes read is the
length of <em>buf</em>.
The argument <em>addrsize</em> specifies the address size in bits.</p>
<p>The method returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="machine.I2C.writeto_mem">
<span class="sig-prename descclassname"><span class="pre">I2C.</span></span><span class="sig-name descname"><span class="pre">writeto_mem</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">addr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memaddr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buf</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addrsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.I2C.writeto_mem" title="Permalink to this definition">¶</a></dt>
<dd><p>Write <em>buf</em> to the peripheral specified by <em>addr</em> starting from the
memory address specified by <em>memaddr</em>.
The argument <em>addrsize</em> specifies the address size in bits.</p>
<p>The method returns <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="machine.SPI.html" class="btn btn-neutral float-left" title="class SPI – a Serial Peripheral Interface bus protocol (controller side)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="machine.I2S.html" class="btn btn-neutral float-right" title="class I2S – Inter-IC Sound bus protocol" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2023, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 19 Jul 2023.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>