

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>openamp – provides standard Asymmetric Multiprocessing (AMP) support &mdash; MicroPython 1.25 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
      <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=334bb090"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="uctypes – access binary data in a structured way" href="uctypes.html" />
    <link rel="prev" title="class PPP – create network connections over serial PPP" href="network.PPP.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroPython
              <img src="../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bluetooth.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bluetooth</span></code> — low-level Bluetooth</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryptolib.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cryptolib</span></code> – cryptographic ciphers</a></li>
<li class="toctree-l3"><a class="reference internal" href="deflate.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">deflate</span></code> – deflate compression &amp; decompression</a></li>
<li class="toctree-l3"><a class="reference internal" href="machine.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">machine</span></code> — functions related to the hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="micropython.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">micropython</span></code> – access and control MicroPython internals</a></li>
<li class="toctree-l3"><a class="reference internal" href="network.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">network</span></code> — network configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">openamp</span></code> – provides standard Asymmetric Multiprocessing (AMP) support</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#endpoint-class">Endpoint class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#remoteproc-class">RemoteProc class</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="uctypes.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uctypes</span></code> – access binary data in a structured way</a></li>
<li class="toctree-l3"><a class="reference internal" href="mutex.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mutex</span></code> — mutex module</a></li>
<li class="toctree-l3"><a class="reference internal" href="uping.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">uping</span></code> — Ping another computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="requests.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">requests</span></code> — Related functions of HTTP client</a></li>
<li class="toctree-l3"><a class="reference internal" href="vfs.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vfs</span></code> – virtual filesystem control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#third-party-libraries-on-the-openmv-cam">Third-party libraries on the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#extending-built-in-libraries-from-python">Extending built-in libraries from Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">MicroPython libraries</a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">openamp</span></code> – provides standard Asymmetric Multiprocessing (AMP) support</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/library/openamp.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-openamp">
<span id="openamp-provides-standard-asymmetric-multiprocessing-amp-support"></span><h1><a class="reference internal" href="#module-openamp" title="openamp: provides standard Asymmetric Multiprocessing (AMP) support"><code class="xref py py-mod docutils literal notranslate"><span class="pre">openamp</span></code></a> – provides standard Asymmetric Multiprocessing (AMP) support<a class="headerlink" href="#module-openamp" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">openamp</span></code> module provides a standard inter-processor communications infrastructure
for MicroPython. The module handles all of the details of OpenAMP, such as setting up
the shared resource table, initializing vrings, etc. It provides an API for using the
RPMsg bus infrastructure with the <a class="reference internal" href="#openamp.Endpoint" title="openamp.Endpoint"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Endpoint</span></code></a> class, and provides processor Life Cycle
Management (LCM) support, such as loading firmware and starting and stopping a remote
core, via the <a class="reference internal" href="#openamp.RemoteProc" title="openamp.RemoteProc"><code class="xref any py py-class docutils literal notranslate"><span class="pre">RemoteProc</span></code></a> class.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">openamp</span>

<span class="k">def</span><span class="w"> </span><span class="nf">ept_recv_callback</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Received message on endpoint&quot;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

<span class="c1"># Create a new RPMsg endpoint to communicate with the remote core.</span>
<span class="n">ept</span> <span class="o">=</span> <span class="n">openamp</span><span class="o">.</span><span class="n">Endpoint</span><span class="p">(</span><span class="s2">&quot;vuart-channel&quot;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">ept_recv_callback</span><span class="p">)</span>

<span class="c1"># Create a RemoteProc object, load its firmware and start it.</span>
<span class="n">rproc</span> <span class="o">=</span> <span class="n">openamp</span><span class="o">.</span><span class="n">RemoteProc</span><span class="p">(</span><span class="s2">&quot;virtual_uart.elf&quot;</span><span class="p">)</span> <span class="c1"># Or entry point address (ex 0x081E0000)</span>
<span class="n">rproc</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">ept</span><span class="o">.</span><span class="n">is_ready</span><span class="p">():</span>
        <span class="n">ept</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="openamp.new_service_callback">
<span class="sig-prename descclassname"><span class="pre">openamp.</span></span><span class="sig-name descname"><span class="pre">new_service_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ns_callback</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openamp.new_service_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the new service callback.</p>
<p>The <em>ns_callback</em> argument is a function that will be called when the remote processor
announces new services. At that point the host processor can choose to create the
announced endpoint, if this particular service is supported, or ignore it if it’s
not. If this function is not set, the host processor should first register the
endpoint locally, and it will be automatically bound when the remote announces
the service.</p>
</dd></dl>

</section>
<section id="endpoint-class">
<h2>Endpoint class<a class="headerlink" href="#endpoint-class" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="openamp.Endpoint">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openamp.</span></span><span class="sig-name descname"><span class="pre">Endpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">ENDPOINT_ADDR_ANY</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">ENDPOINT_ADDR_ANY</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openamp.Endpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new RPMsg Endpoint. An endpoint is a bidirectional communication
channel between two cores.</p>
<p>Arguments are:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>name</em> is the name of the endpoint.</p></li>
<li><p><em>callback</em> is a function that is called when the endpoint receives data with the
source address of the remote point, and the data as bytes passed by reference.</p></li>
<li><p><em>src</em> is the endpoint source address. If none is provided one will be assigned
to the endpoint by the library.</p></li>
<li><p><em>dest</em> is the endpoint destination address. If the endpoint is created from the
new_service_callback, this must be provided and it must match the remote endpoint’s
source address. If the endpoint is registered locally, before the announcement, the
destination address will be assigned by the library when the endpoint is bound.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openamp.Endpoint.deinit">
<span class="sig-prename descclassname"><span class="pre">Endpoint.</span></span><span class="sig-name descname"><span class="pre">deinit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#openamp.Endpoint.deinit" title="Permalink to this definition">¶</a></dt>
<dd><p>Destroy the endpoint and release all of its resources.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openamp.Endpoint.is_ready">
<span class="sig-prename descclassname"><span class="pre">Endpoint.</span></span><span class="sig-name descname"><span class="pre">is_ready</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#openamp.Endpoint.is_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if the endpoint is ready to send (i.e., has both a source and destination addresses)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openamp.Endpoint.send">
<span class="sig-prename descclassname"><span class="pre">Endpoint.</span></span><span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">src</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openamp.Endpoint.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Send a message to the remote processor over this endpoint.</p>
<p>Arguments are:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>src</em> is the source endpoint address of the message. If none is provided, the
source address the endpoint is bound to is used.</p></li>
<li><p><em>dest</em> is the destination endpoint address of the message. If none is provided,
the destination address the endpoint is bound to is used.</p></li>
<li><p><em>timeout</em> specifies the time in milliseconds to wait for a free buffer. By default
the function is blocking.</p></li>
</ul>
</div></blockquote>
</dd></dl>

</section>
<section id="remoteproc-class">
<h2>RemoteProc class<a class="headerlink" href="#remoteproc-class" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="openamp.RemoteProc">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">openamp.</span></span><span class="sig-name descname"><span class="pre">RemoteProc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#openamp.RemoteProc" title="Permalink to this definition">¶</a></dt>
<dd><p>The RemoteProc object provides processor Life Cycle Management (LCM) support, such as
loading firmware, starting and stopping a remote core.</p>
<p>The <em>entry</em> argument can be a path to firmware image, in which case the firmware is
loaded from file to its target memory, or an entry point address, in which case the
firmware must be loaded already at the given address.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openamp.RemoteProc.start">
<span class="sig-prename descclassname"><span class="pre">RemoteProc.</span></span><span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#openamp.RemoteProc.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the remote processor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openamp.RemoteProc.stop">
<span class="sig-prename descclassname"><span class="pre">RemoteProc.</span></span><span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#openamp.RemoteProc.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the remote processor. The exact behavior is platform-dependent. On the STM32H7 for
example it’s not possible to stop and then restart the Cortex-M4 core, so a complete
system reset is performed on a call to this function.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="openamp.RemoteProc.shutdown">
<span class="sig-prename descclassname"><span class="pre">RemoteProc.</span></span><span class="sig-name descname"><span class="pre">shutdown</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#openamp.RemoteProc.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Shutdown stops the remote processor and releases all of its resources. The exact behavior
is platform-dependent, however typically it disables power and clocks to the remote core.
This function is also used as the finaliser (i.e., called when <code class="docutils literal notranslate"><span class="pre">RemoteProc</span></code> object is
collected). Note that on the STM32H7, it’s not possible to stop and then restart the
Cortex-M4 core, so a complete system reset is performed on a call to this function.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="network.PPP.html" class="btn btn-neutral float-left" title="class PPP – create network connections over serial PPP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="uctypes.html" class="btn btn-neutral float-right" title="uctypes – access binary data in a structured way" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2025, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 02 Jun 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>