<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>stm — functionality specific to STM32 MCUs &mdash; MicroPython 1.22 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
      <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=f8c2205d"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="sensor — camera sensor" href="omv.sensor.html" />
    <link rel="prev" title="class USB_VCP – USB virtual comm port" href="pyb.USB_VCP.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroPython
              <img src="../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.22
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pyb.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyb</span></code> — functions related to the board</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code> — functionality specific to STM32 MCUs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#memory-access">Memory access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#peripheral-register-constants">Peripheral register constants</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions-specific-to-stm32wbxx-mcus">Functions specific to STM32WBxx MCUs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions-specific-to-stm32wlxx-mcus">Functions specific to STM32WLxx MCUs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="omv.sensor.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sensor</span></code> — camera sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">image</span></code> — machine vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.tf.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tf</span></code> — Tensor Flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gif</span></code> — gif recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mjpeg</span></code> — mjpeg recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.audio.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audio</span></code> — Audio Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.micro_speech.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">micro_speech</span></code> — Micro Speech Audio Module Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.display.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">display</span></code> — display driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.fir.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fir</span></code> — thermal sensor driver (fir == far infrared)</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.tv.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tv</span></code> — tv shield driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.cpufreq.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cpufreq</span></code> — CPU Frequency Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.buzzer.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">buzzer</span></code> — buzzer driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.imu.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imu</span></code> — imu sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.rpc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rpc</span></code> — rpc library</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.rtsp.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rtsp</span></code> — rtsp library</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.omv.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">omv</span></code> — OpenMV Cam Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gt911.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gt911</span></code> — Touch Screen Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.ft5x06.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ft5x06</span></code> — Touch Screen Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.tfp410.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tfp410</span></code> — DVI/HDMI Controller</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#third-party-libraries-on-the-openmv-cam">Third-party libraries on the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#extending-built-in-libraries-from-python">Extending built-in libraries from Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">MicroPython libraries</a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code> — functionality specific to STM32 MCUs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/library/stm.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-stm">
<span id="stm-functionality-specific-to-stm32-mcus"></span><h1><a class="reference internal" href="#module-stm" title="stm: functionality specific to STM32 MCUs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code></a> — functionality specific to STM32 MCUs<a class="headerlink" href="#module-stm" title="Permalink to this heading">¶</a></h1>
<p>This module provides functionality specific to STM32 microcontrollers, including
direct access to peripheral registers.</p>
<section id="memory-access">
<h2>Memory access<a class="headerlink" href="#memory-access" title="Permalink to this heading">¶</a></h2>
<p>The module exposes three objects used for raw memory access.</p>
<dl class="py data">
<dt class="sig sig-object py" id="stm.mem8">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">mem8</span></span><a class="headerlink" href="#stm.mem8" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write 8 bits of memory.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="stm.mem16">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">mem16</span></span><a class="headerlink" href="#stm.mem16" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write 16 bits of memory.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="stm.mem32">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">mem32</span></span><a class="headerlink" href="#stm.mem32" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write 32 bits of memory.</p>
</dd></dl>

<p>Use subscript notation <code class="docutils literal notranslate"><span class="pre">[...]</span></code> to index these objects with the address of
interest.</p>
<p>These memory objects can be used in combination with the peripheral register
constants to read and write registers of the MCU hardware peripherals, as well
as all other areas of address space.</p>
</section>
<section id="peripheral-register-constants">
<h2>Peripheral register constants<a class="headerlink" href="#peripheral-register-constants" title="Permalink to this heading">¶</a></h2>
<p>The module defines constants for registers which are generated from CMSIS header
files, and the constants available depend on the microcontroller series that is
being compiled for.  Examples of some constants include:</p>
<dl class="py data">
<dt class="sig sig-object py" id="stm.GPIOA">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">GPIOA</span></span><a class="headerlink" href="#stm.GPIOA" title="Permalink to this definition">¶</a></dt>
<dd><p>Base address of the GPIOA peripheral.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="stm.GPIOB">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">GPIOB</span></span><a class="headerlink" href="#stm.GPIOB" title="Permalink to this definition">¶</a></dt>
<dd><p>Base address of the GPIOB peripheral.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="stm.GPIO_BSRR">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">GPIO_BSRR</span></span><a class="headerlink" href="#stm.GPIO_BSRR" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the GPIO bit set/reset register.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="stm.GPIO_IDR">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">GPIO_IDR</span></span><a class="headerlink" href="#stm.GPIO_IDR" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the GPIO input data register.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="stm.GPIO_ODR">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">GPIO_ODR</span></span><a class="headerlink" href="#stm.GPIO_ODR" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the GPIO output data register.</p>
</dd></dl>

<p>Constants that are named after a peripheral, like <code class="docutils literal notranslate"><span class="pre">GPIOA</span></code>, are the absolute
address of that peripheral.  Constants that have a prefix which is the name of a
peripheral, like <code class="docutils literal notranslate"><span class="pre">GPIO_BSRR</span></code>, are relative offsets of the register.  Accessing
peripheral registers requires adding the absolute base address of the peripheral
and the relative register offset.  For example <code class="docutils literal notranslate"><span class="pre">GPIOA</span> <span class="pre">+</span> <span class="pre">GPIO_BSRR</span></code> is the
full, absolute address of the <code class="docutils literal notranslate"><span class="pre">GPIOA-&gt;BSRR</span></code> register.</p>
<p>Example use:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set PA2 high</span>
<span class="n">stm</span><span class="o">.</span><span class="n">mem32</span><span class="p">[</span><span class="n">stm</span><span class="o">.</span><span class="n">GPIOA</span> <span class="o">+</span> <span class="n">stm</span><span class="o">.</span><span class="n">GPIO_BSRR</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span>

<span class="c1"># read PA3</span>
<span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">stm</span><span class="o">.</span><span class="n">mem32</span><span class="p">[</span><span class="n">stm</span><span class="o">.</span><span class="n">GPIOA</span> <span class="o">+</span> <span class="n">stm</span><span class="o">.</span><span class="n">GPIO_IDR</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="functions-specific-to-stm32wbxx-mcus">
<h2>Functions specific to STM32WBxx MCUs<a class="headerlink" href="#functions-specific-to-stm32wbxx-mcus" title="Permalink to this heading">¶</a></h2>
<p>These functions are available on STM32WBxx microcontrollers, and interact with
the second CPU, the RF core.</p>
<dl class="py function">
<dt class="sig sig-object py" id="stm.rfcore_status">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">rfcore_status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stm.rfcore_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the status of the second CPU as an integer (the first word of device
info table).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stm.rfcore_fw_version">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">rfcore_fw_version</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stm.rfcore_fw_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the version of the firmware running on the second CPU.  Pass in 0 for
<em>id</em> to get the FUS version, and 1 to get the WS version.</p>
<p>Returns a 5-tuple with the full version number.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stm.rfcore_sys_hci">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">rfcore_sys_hci</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ogf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ocf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout_ms</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stm.rfcore_sys_hci" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a HCI command on the SYS channel.  The execution is synchronous.</p>
<p>Returns a bytes object with the result of the SYS command.</p>
</dd></dl>

</section>
<section id="functions-specific-to-stm32wlxx-mcus">
<h2>Functions specific to STM32WLxx MCUs<a class="headerlink" href="#functions-specific-to-stm32wlxx-mcus" title="Permalink to this heading">¶</a></h2>
<p>These functions are available on STM32WLxx microcontrollers, and interact with
the integrated “SUBGHZ” radio modem peripheral.</p>
<dl class="py function">
<dt class="sig sig-object py" id="stm.subghz_cs">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">subghz_cs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stm.subghz_cs" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the internal SPI CS pin attached to the radio peripheral. The <code class="docutils literal notranslate"><span class="pre">level</span></code>
argument is active-low: a truthy value means “CS pin high” and de-asserts the
signal, a falsey value means “CS pin low” and asserts the signal.</p>
<p>The internal-only SPI bus corresponding to this CS signal can be instantiated
using <a class="reference internal" href="machine.SPI.html#machine-spi"><span class="std std-ref">machine.SPI()</span></a> <code class="docutils literal notranslate"><span class="pre">id</span></code> value <code class="docutils literal notranslate"><span class="pre">&quot;SUBGHZ&quot;</span></code>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stm.subghz_irq">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">subghz_irq</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">handler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#stm.subghz_irq" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the internal SUBGHZ radio interrupt handler to the provided
function. The handler function is called as a “hard” interrupt in response to
radio peripheral interrupts. See <a class="reference internal" href="../reference/isr_rules.html#isr-rules"><span class="std std-ref">Writing interrupt handlers</span></a> for more information about
interrupt handlers in MicroPython.</p>
<p>Calling this function with the handler argument set to None disables the IRQ.</p>
<p>Due to a hardware limitation, each time this IRQ fires MicroPython disables
it before calling the handler. In order to receive another interrupt, Python
code should call <code class="docutils literal notranslate"><span class="pre">subghz_irq()</span></code> to set the handler again. This has the side
effect of re-enabling the IRQ.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="stm.subghz_is_busy">
<span class="sig-prename descclassname"><span class="pre">stm.</span></span><span class="sig-name descname"><span class="pre">subghz_is_busy</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#stm.subghz_is_busy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <code class="docutils literal notranslate"><span class="pre">bool</span></code> corresponding to the internal “RFBUSYS” signal from the
radio peripheral. Before sending a new command to the radio over SPI then
this function should be polled until it returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, to confirm the
busy signal is de-asserted.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pyb.USB_VCP.html" class="btn btn-neutral float-left" title="class USB_VCP – USB virtual comm port" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="omv.sensor.html" class="btn btn-neutral float-right" title="sensor — camera sensor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 05 Mar 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>