
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>stm — functionality specific to STM32 MCUs &#8212; MicroPython 1.19 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="sensor — camera sensor" href="omv.sensor.html" />
    <link rel="prev" title="class USB_VCP – USB virtual comm port" href="pyb.USB_VCP.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="omv.sensor.html" title="sensor — camera sensor"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pyb.USB_VCP.html" title="class USB_VCP – USB virtual comm port"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython 1.19 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">MicroPython libraries</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-stm">
<span id="stm-functionality-specific-to-stm32-mcus"></span><h1><a class="reference internal" href="#module-stm" title="stm: functionality specific to STM32 MCUs"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code></a> — functionality specific to STM32 MCUs<a class="headerlink" href="#module-stm" title="Permalink to this headline">¶</a></h1>
<p>This module provides functionality specific to STM32 microcontrollers, including
direct access to peripheral registers.</p>
<div class="section" id="memory-access">
<h2>Memory access<a class="headerlink" href="#memory-access" title="Permalink to this headline">¶</a></h2>
<p>The module exposes three objects used for raw memory access.</p>
<dl class="data">
<dt id="stm.mem8">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">mem8</code><a class="headerlink" href="#stm.mem8" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write 8 bits of memory.</p>
</dd></dl>

<dl class="data">
<dt id="stm.mem16">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">mem16</code><a class="headerlink" href="#stm.mem16" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write 16 bits of memory.</p>
</dd></dl>

<dl class="data">
<dt id="stm.mem32">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">mem32</code><a class="headerlink" href="#stm.mem32" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write 32 bits of memory.</p>
</dd></dl>

<p>Use subscript notation <code class="docutils literal notranslate"><span class="pre">[...]</span></code> to index these objects with the address of
interest.</p>
<p>These memory objects can be used in combination with the peripheral register
constants to read and write registers of the MCU hardware peripherals, as well
as all other areas of address space.</p>
</div>
<div class="section" id="peripheral-register-constants">
<h2>Peripheral register constants<a class="headerlink" href="#peripheral-register-constants" title="Permalink to this headline">¶</a></h2>
<p>The module defines constants for registers which are generated from CMSIS header
files, and the constants available depend on the microcontroller series that is
being compiled for.  Examples of some constants include:</p>
<dl class="data">
<dt id="stm.GPIOA">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">GPIOA</code><a class="headerlink" href="#stm.GPIOA" title="Permalink to this definition">¶</a></dt>
<dd><p>Base address of the GPIOA peripheral.</p>
</dd></dl>

<dl class="data">
<dt id="stm.GPIOB">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">GPIOB</code><a class="headerlink" href="#stm.GPIOB" title="Permalink to this definition">¶</a></dt>
<dd><p>Base address of the GPIOB peripheral.</p>
</dd></dl>

<dl class="data">
<dt id="stm.GPIO_BSRR">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">GPIO_BSRR</code><a class="headerlink" href="#stm.GPIO_BSRR" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the GPIO bit set/reset register.</p>
</dd></dl>

<dl class="data">
<dt id="stm.GPIO_IDR">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">GPIO_IDR</code><a class="headerlink" href="#stm.GPIO_IDR" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the GPIO input data register.</p>
</dd></dl>

<dl class="data">
<dt id="stm.GPIO_ODR">
<code class="sig-prename descclassname">stm.</code><code class="sig-name descname">GPIO_ODR</code><a class="headerlink" href="#stm.GPIO_ODR" title="Permalink to this definition">¶</a></dt>
<dd><p>Offset of the GPIO output data register.</p>
</dd></dl>

<p>Constants that are named after a peripheral, like <code class="docutils literal notranslate"><span class="pre">GPIOA</span></code>, are the absolute
address of that peripheral.  Constants that have a prefix which is the name of a
peripheral, like <code class="docutils literal notranslate"><span class="pre">GPIO_BSRR</span></code>, are relative offsets of the register.  Accessing
peripheral registers requires adding the absolute base address of the peripheral
and the relative register offset.  For example <code class="docutils literal notranslate"><span class="pre">GPIOA</span> <span class="pre">+</span> <span class="pre">GPIO_BSRR</span></code> is the
full, absolute address of the <code class="docutils literal notranslate"><span class="pre">GPIOA-&gt;BSRR</span></code> register.</p>
<p>Example use:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># set PA2 high</span>
<span class="n">stm</span><span class="o">.</span><span class="n">mem32</span><span class="p">[</span><span class="n">stm</span><span class="o">.</span><span class="n">GPIOA</span> <span class="o">+</span> <span class="n">stm</span><span class="o">.</span><span class="n">GPIO_BSRR</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span>

<span class="c1"># read PA3</span>
<span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">stm</span><span class="o">.</span><span class="n">mem32</span><span class="p">[</span><span class="n">stm</span><span class="o">.</span><span class="n">GPIOA</span> <span class="o">+</span> <span class="n">stm</span><span class="o">.</span><span class="n">GPIO_IDR</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">1</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/web-logo-sticky.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code> — functionality specific to STM32 MCUs</a><ul>
<li><a class="reference internal" href="#memory-access">Memory access</a></li>
<li><a class="reference internal" href="#peripheral-register-constants">Peripheral register constants</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="pyb.USB_VCP.html"
                        title="previous chapter">class USB_VCP – USB virtual comm port</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="omv.sensor.html"
                        title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sensor</span></code> — camera sensor</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/library/stm.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="omv.sensor.html" title="sensor — camera sensor"
             >next</a> |</li>
        <li class="right" >
          <a href="pyb.USB_VCP.html" title="class USB_VCP – USB virtual comm port"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MicroPython 1.19 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >MicroPython libraries</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright - The MicroPython Documentation is Copyright © 2014-2023, Damien P. George, Paul Sokolovsky, and contributors.
      Last updated on 02 May 2023.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>