

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tof — time-of-flight sensor driver &mdash; MicroPython 1.26 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
      <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=04b33afa"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="tv — tv shield driver" href="omv.tv.html" />
    <link rel="prev" title="fir — thermal sensor driver (fir == far infrared)" href="omv.fir.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroPython
              <img src="../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">MicroPython libraries</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#python-standard-libraries-and-micro-libraries">Python standard libraries and micro-libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#micropython-specific-libraries">MicroPython-specific libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#libraries-specific-to-the-openmv-cam">Libraries specific to the OpenMV Cam</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pyb.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyb</span></code> — functions related to the board</a></li>
<li class="toctree-l3"><a class="reference internal" href="stm.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stm</span></code> — functionality specific to STM32 MCUs</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.sensor.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sensor</span></code> — camera sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.csi.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">csi</span></code> — camera sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.csi.html#class-csi-camera-sensor-interface">class CSI – Camera Sensor Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.image.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">image</span></code> — machine vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.ml.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ml</span></code> — Machine Learning</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gif.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gif</span></code> — gif recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.mjpeg.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mjpeg</span></code> — mjpeg recording</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.audio.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">audio</span></code> — Audio Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.display.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">display</span></code> — display driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.fir.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fir</span></code> — thermal sensor driver (fir == far infrared)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tof</span></code> — time-of-flight sensor driver</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#constants">Constants</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="omv.tv.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tv</span></code> — tv shield driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.cpufreq.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cpufreq</span></code> — CPU Frequency Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.imu.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imu</span></code> — imu sensor</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.rpc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rpc</span></code> — rpc library</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.rtsp.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rtsp</span></code> — rtsp library</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.omv.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">omv</span></code> — OpenMV Cam Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.gt911.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">gt911</span></code> — Touch Screen Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.ft5x06.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ft5x06</span></code> — Touch Screen Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.tfp410.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tfp410</span></code> — DVI/HDMI Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.pca9674a.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pca9674a</span></code> — I2C Expander Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="omv.pca9674a.html#class-pca9674a-8-bit-i-o-expander">class PCA9674A – 8-bit I/O expander</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#third-party-libraries-on-the-openmv-cam">Third-party libraries on the OpenMV Cam</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#extending-built-in-libraries-from-python">Extending built-in libraries from Python</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">MicroPython libraries</a></li>
      <li class="breadcrumb-item active"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tof</span></code> — time-of-flight sensor driver</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/library/omv.tof.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-tof">
<span id="tof-time-of-flight-sensor-driver"></span><h1><a class="reference internal" href="#module-tof" title="tof: time-of-flight sensor driver"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tof</span></code></a> — time-of-flight sensor driver<a class="headerlink" href="#module-tof" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">tof</span></code> module is used for controlling the time-of-flight sensor.</p>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sensor</span><span class="o">,</span><span class="w"> </span><span class="nn">tof</span>

<span class="c1"># Setup camera.</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">set_pixformat</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">RGB565</span><span class="p">)</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">set_framesize</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">QVGA</span><span class="p">)</span>
<span class="n">sensor</span><span class="o">.</span><span class="n">skip_frames</span><span class="p">()</span>
<span class="n">tof</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

<span class="c1"># Show image.</span>
<span class="k">while</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">sensor</span><span class="o">.</span><span class="n">snapshot</span><span class="p">()</span>
    <span class="n">depth</span><span class="p">,</span> <span class="n">depth_min</span><span class="p">,</span> <span class="n">depth_max</span> <span class="o">=</span> <span class="n">tof</span><span class="o">.</span><span class="n">read_depth</span><span class="p">()</span>
    <span class="n">tof</span><span class="o">.</span><span class="n">draw_depth</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">depth</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;====================&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Min depth in mm seen: </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">depth_min</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Max depth in mm seen: </span><span class="si">%0.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">depth_max</span><span class="p">)</span>
</pre></div>
</div>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="tof.init">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#tof.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes an onboard depth sensor.</p>
<p><code class="docutils literal notranslate"><span class="pre">type</span></code> indicates the type of thermopile shield:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#tof.TOF_NONE" title="tof.TOF_NONE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_NONE</span></code></a>: 0 pixels.</p></li>
<li><p><a class="reference internal" href="#tof.TOF_VL53LX" title="tof.TOF_VL53LX"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_VL53LX</span></code></a>: 8x8 pixels.</p></li>
</ul>
</div></blockquote>
<p>By default type is <code class="docutils literal notranslate"><span class="pre">-1</span></code> which will cause <a class="reference internal" href="#tof.init" title="tof.init"><code class="xref any py py-func docutils literal notranslate"><span class="pre">tof.init()</span></code></a> to automatically scan and initialize an
attached thermal sensor based on the I2C address.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.reset">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#tof.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-initializes an onboard depth sensor.</p>
<p><code class="docutils literal notranslate"><span class="pre">type</span></code> indicates the type of thermopile shield:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#tof.TOF_NONE" title="tof.TOF_NONE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_NONE</span></code></a>: 0 pixels.</p></li>
<li><p><a class="reference internal" href="#tof.TOF_VL53LX" title="tof.TOF_VL53LX"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_VL53LX</span></code></a>: 8x8 pixels.</p></li>
</ul>
</div></blockquote>
<p>By default type is <code class="docutils literal notranslate"><span class="pre">-1</span></code> which will cause <a class="reference internal" href="#tof.init" title="tof.init"><code class="xref any py py-func docutils literal notranslate"><span class="pre">tof.init()</span></code></a> to automatically scan and initialize an
attached thermal sensor based on the I2C address.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.deinit">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">deinit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#tof.deinit" title="Permalink to this definition">¶</a></dt>
<dd><p>Deinitializes the depth sensor freeing up resources.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.width">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">width</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span></span><a class="headerlink" href="#tof.width" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the width (horizontal resolution) of the depth sensor in-use:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#tof.TOF_NONE" title="tof.TOF_NONE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_NONE</span></code></a>: 0 pixels.</p></li>
<li><p><a class="reference internal" href="#tof.TOF_VL53LX" title="tof.TOF_VL53LX"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_VL53LX</span></code></a>: 8 pixels.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.height">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">height</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span></span><a class="headerlink" href="#tof.height" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the height (vertical resolution) of the depth sensor in-use:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#tof.TOF_NONE" title="tof.TOF_NONE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_NONE</span></code></a>: 0 pixels.</p></li>
<li><p><a class="reference internal" href="#tof.TOF_VL53LX" title="tof.TOF_VL53LX"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_VL53LX</span></code></a>: 8 pixels.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.type">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span></span><a class="headerlink" href="#tof.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the type of the depth sensor in-use:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#tof.TOF_NONE" title="tof.TOF_NONE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_NONE</span></code></a></p></li>
<li><p><a class="reference internal" href="#tof.TOF_VL53LX" title="tof.TOF_VL53LX"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_VL53LX</span></code></a></p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.refresh">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">refresh</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span></span><a class="headerlink" href="#tof.refresh" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the refresh rate of the depth sensor in-use:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#tof.TOF_NONE" title="tof.TOF_NONE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_NONE</span></code></a>: 0 Hz.</p></li>
<li><p><a class="reference internal" href="#tof.TOF_VL53LX" title="tof.TOF_VL53LX"><code class="xref any py py-data docutils literal notranslate"><span class="pre">tof.TOF_VL53LX</span></code></a>: 15 Hz.</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.read_depth">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">read_depth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hmirror</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vflip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tof.read_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple containing the depth list (width * height),
the minimum depth seen, and the maximum depth seen.</p>
<p><code class="docutils literal notranslate"><span class="pre">hmirror</span></code> if set to True horizontally mirrors the <code class="docutils literal notranslate"><span class="pre">depth</span></code> array.</p>
<p><code class="docutils literal notranslate"><span class="pre">vflip</span></code> if set to True vertically flips the <code class="docutils literal notranslate"><span class="pre">depth</span></code> array.</p>
<p><code class="docutils literal notranslate"><span class="pre">transpose</span></code> if set to True transposes the <code class="docutils literal notranslate"><span class="pre">depth</span></code> array.</p>
<p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> if not -1 then how many milliseconds to wait for the new frame.</p>
<p>If you want to rotate an image by multiples of 90 degrees pass the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hmirror</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transpose</span><span class="o">=</span><span class="kc">False</span> <span class="o">-&gt;</span> <span class="mi">0</span> <span class="n">degree</span> <span class="n">rotation</span>
<span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">hmirror</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transpose</span><span class="o">=</span><span class="kc">True</span>  <span class="o">-&gt;</span> <span class="mi">90</span> <span class="n">degree</span> <span class="n">rotation</span>
<span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">hmirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">transpose</span><span class="o">=</span><span class="kc">False</span> <span class="o">-&gt;</span> <span class="mi">180</span> <span class="n">degree</span> <span class="n">rotation</span>
<span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hmirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">transpose</span><span class="o">=</span><span class="kc">True</span>  <span class="o">-&gt;</span> <span class="mi">270</span> <span class="n">degree</span> <span class="n">rotation</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">depth</span><span class="p">,</span> <span class="n">to_min</span><span class="p">,</span> <span class="n">to_max</span> <span class="o">=</span> <span class="n">tof</span><span class="o">.</span><span class="n">read_depth</span><span class="p">()</span>
</pre></div>
</div>
<p>The values returned are floats that represent the depth in mm.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">depth</span></code> is a (width * height) list of floats (4-bytes each).</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.draw_depth">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">draw_depth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="omv.image.html#image.Image" title="image.Image"><span class="pre">image.Image</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">tof</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#float" title="float"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#float" title="float"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_palette</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">image.PALETTE_DEPTH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_palette</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Optional[Tuple[float,</span> <span class="pre">float]]</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#tof.draw_depth" title="Permalink to this definition">¶</a></dt>
<dd><p>Draws an <code class="docutils literal notranslate"><span class="pre">depth</span></code> array on <code class="docutils literal notranslate"><span class="pre">image</span></code> whose top-left corner starts at location x, y. This method
automatically handles rendering the image passed into the correct pixel format for the destination
image while also handling clipping seamlessly.</p>
<p><code class="docutils literal notranslate"><span class="pre">x_scale</span></code> controls how much the displayed image is scaled by in the x direction (float). If this
value is negative the image will be flipped horizontally. Note that if <code class="docutils literal notranslate"><span class="pre">y_scale</span></code> is not specified
then it will match <code class="docutils literal notranslate"><span class="pre">x_scale</span></code> to maintain the aspect ratio.</p>
<p><code class="docutils literal notranslate"><span class="pre">y_scale</span></code> controls how much the displayed image is scaled by in the y direction (float). If this
value is negative the image will be flipped vertically. Note that if <code class="docutils literal notranslate"><span class="pre">x_scale</span></code> is not specified
then it will match <code class="docutils literal notranslate"><span class="pre">x_scale</span></code> to maintain the aspect ratio.</p>
<p><code class="docutils literal notranslate"><span class="pre">roi</span></code> is the region-of-interest rectangle tuple (x, y, w, h) of the source image to draw. This
allows you to extract just the pixels in the ROI to scale and draw on the destination image.</p>
<p><code class="docutils literal notranslate"><span class="pre">rgb_channel</span></code> is the RGB channel (0=R, G=1, B=2) to extract from an RGB565 image (if passed)
and to render onto the destination image. For example, if you pass <code class="docutils literal notranslate"><span class="pre">rgb_channel=1</span></code> this will
extract the green channel of the source RGB565 image and draw that in grayscale on the
destination image.</p>
<p><code class="docutils literal notranslate"><span class="pre">alpha</span></code> controls how much of the source image to blend into the destination image. A value of
255 draws an opaque source image while a value lower than 255 produces a blend between the source
and destination image. 0 results in no modification to the destination image.</p>
<p><code class="docutils literal notranslate"><span class="pre">color_palette</span></code> if not <code class="docutils literal notranslate"><span class="pre">-1</span></code> can be an a color palette enum or
a 256 pixel in total RGB565 image to use as a color lookup table on the grayscale value of
whatever the source image is. This is applied after <code class="docutils literal notranslate"><span class="pre">rgb_channel</span></code> extraction if used.</p>
<p><code class="docutils literal notranslate"><span class="pre">alpha_palette</span></code> if not <code class="docutils literal notranslate"><span class="pre">-1</span></code> can be a 256 pixel in total GRAYSCALE image to use as a alpha
palette which modulates the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> value of the source image being drawn at a pixel pixel
level allowing you to precisely control the alpha value of pixels based on their grayscale value.
A pixel value of 255 in the alpha lookup table is opaque which anything less than 255 becomes
more transparent until 0. This is applied after <code class="docutils literal notranslate"><span class="pre">rgb_channel</span></code> extraction if used.</p>
<p><code class="docutils literal notranslate"><span class="pre">hint</span></code> can be a logical OR of the flags:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="omv.image.html#image.AREA" title="image.AREA"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.AREA</span></code></a>: Use area scaling when downscaling versus the default of nearest neighbor.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.BILINEAR" title="image.BILINEAR"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.BILINEAR</span></code></a>: Use bilinear scaling versus the default of nearest neighbor scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.BICUBIC" title="image.BICUBIC"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.BICUBIC</span></code></a>: Use bicubic scaling versus the default of nearest neighbor scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.CENTER" title="image.CENTER"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.CENTER</span></code></a>: Center the image being drawn on the display. This is applied after scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.HMIRROR" title="image.HMIRROR"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.HMIRROR</span></code></a>: Horizontally mirror the image.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.VFLIP" title="image.VFLIP"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.VFLIP</span></code></a>: Vertically flip the image.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.TRANSPOSE" title="image.TRANSPOSE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.TRANSPOSE</span></code></a>: Transpose the image (swap x/y).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.EXTRACT_RGB_CHANNEL_FIRST" title="image.EXTRACT_RGB_CHANNEL_FIRST"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.EXTRACT_RGB_CHANNEL_FIRST</span></code></a>: Do rgb_channel extraction before scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.APPLY_COLOR_PALETTE_FIRST" title="image.APPLY_COLOR_PALETTE_FIRST"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.APPLY_COLOR_PALETTE_FIRST</span></code></a>: Apply color palette before scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.SCALE_ASPECT_KEEP" title="image.SCALE_ASPECT_KEEP"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.SCALE_ASPECT_KEEP</span></code></a>: Scale the image being drawn to fit inside the display.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.SCALE_ASPECT_EXPAND" title="image.SCALE_ASPECT_EXPAND"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.SCALE_ASPECT_EXPAND</span></code></a>: Scale the image being drawn to fill the display (results in cropping)</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.SCALE_ASPECT_IGNORE" title="image.SCALE_ASPECT_IGNORE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.SCALE_ASPECT_IGNORE</span></code></a>: Scale the image being drawn to fill the display (results in stretching).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.ROTATE_90" title="image.ROTATE_90"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.ROTATE_90</span></code></a>: Rotate the image by 90 degrees (this is just VFLIP | TRANSPOSE).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.ROTATE_180" title="image.ROTATE_180"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.ROTATE_180</span></code></a>: Rotate the image by 180 degrees (this is just HMIRROR | VFLIP).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.ROTATE_270" title="image.ROTATE_270"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.ROTATE_270</span></code></a>: Rotate the image by 270 degrees (this is just HMIRROR | TRANSPOSE).</p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">scale</span></code> is a two value tuple which controls the min and max depth (in mm) to scale
the <code class="docutils literal notranslate"><span class="pre">depth</span></code> image. By default it’s equal to the image <code class="docutils literal notranslate"><span class="pre">depth</span></code> min and <code class="docutils literal notranslate"><span class="pre">depth</span></code> max.</p>
<p>If x/y are not specified the image will be centered in the field of view. If x_scale/y_scale or
x_size/y_size are not specified the <code class="docutils literal notranslate"><span class="pre">depth</span></code> array will be scaled to fit on the <code class="docutils literal notranslate"><span class="pre">image</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To handle a transposed <code class="docutils literal notranslate"><span class="pre">depth</span></code> array <a class="reference internal" href="#tof.read_depth" title="tof.read_depth"><code class="xref any py py-func docutils literal notranslate"><span class="pre">read_depth</span></code></a> remembers if it was called with <code class="docutils literal notranslate"><span class="pre">transposed</span></code>
<code class="docutils literal notranslate"><span class="pre">True</span></code>. This is then passed to <code class="docutils literal notranslate"><span class="pre">draw_depth</span></code> internally.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="tof.snapshot">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">snapshot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hmirror</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vflip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transpose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#float" title="float"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#float" title="float"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rgb_channel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_palette</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">image.PALETTE_DEPTH</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha_palette</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="builtins.html#float" title="float"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#float" title="float"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3.5/library/constants.html#None" title="(in Python v3.5)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixformat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">image.RGB565</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_to_fb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#bool" title="bool"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="omv.image.html#image.Image" title="image.Image"><span class="pre">image.Image</span></a></span></span><a class="headerlink" href="#tof.snapshot" title="Permalink to this definition">¶</a></dt>
<dd><p>Works like <a class="reference internal" href="omv.sensor.html#sensor.snapshot" title="sensor.snapshot"><code class="xref any py py-func docutils literal notranslate"><span class="pre">sensor.snapshot()</span></code></a> and returns an <a class="reference internal" href="omv.image.html#module-image" title="image: machine vision"><code class="xref any py py-mod docutils literal notranslate"><span class="pre">image</span></code></a> object that is either
<a class="reference internal" href="omv.image.html#image.GRAYSCALE" title="image.GRAYSCALE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.GRAYSCALE</span></code></a> (grayscale) or <a class="reference internal" href="omv.image.html#image.RGB565" title="image.RGB565"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.RGB565</span></code></a> (color). If <code class="docutils literal notranslate"><span class="pre">copy_to_fb</span></code> is False then
the new image is allocated on the MicroPython heap. However, the MicroPython heap is limited
and may not have space to store the new image if exhausted. Instead, set <code class="docutils literal notranslate"><span class="pre">copy_to_fb</span></code> to
True to set the frame buffer to the new image making this function work just like <a class="reference internal" href="omv.sensor.html#sensor.snapshot" title="sensor.snapshot"><code class="xref any py py-func docutils literal notranslate"><span class="pre">sensor.snapshot()</span></code></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">hmirror</span></code> if set to True horizontally mirrors the new image.</p>
<p><code class="docutils literal notranslate"><span class="pre">vflip</span></code> if set to True vertically flips the new image.</p>
<p><code class="docutils literal notranslate"><span class="pre">transpose</span></code> if set to True transposes the new image.</p>
<p>If you want to rotate an image by multiples of 90 degrees pass the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hmirror</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transpose</span><span class="o">=</span><span class="kc">False</span> <span class="o">-&gt;</span> <span class="mi">0</span> <span class="n">degree</span> <span class="n">rotation</span>
<span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">hmirror</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">transpose</span><span class="o">=</span><span class="kc">True</span>  <span class="o">-&gt;</span> <span class="mi">90</span> <span class="n">degree</span> <span class="n">rotation</span>
<span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">hmirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">transpose</span><span class="o">=</span><span class="kc">False</span> <span class="o">-&gt;</span> <span class="mi">180</span> <span class="n">degree</span> <span class="n">rotation</span>
<span class="o">*</span> <span class="n">vflip</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">hmirror</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>  <span class="n">transpose</span><span class="o">=</span><span class="kc">True</span>  <span class="o">-&gt;</span> <span class="mi">270</span> <span class="n">degree</span> <span class="n">rotation</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">x_scale</span></code> controls how much the displayed image is scaled by in the x direction (float). If this
value is negative the image will be flipped horizontally. Note that if <code class="docutils literal notranslate"><span class="pre">y_scale</span></code> is not specified
then it will match <code class="docutils literal notranslate"><span class="pre">x_scale</span></code> to maintain the aspect ratio.</p>
<p><code class="docutils literal notranslate"><span class="pre">y_scale</span></code> controls how much the displayed image is scaled by in the y direction (float). If this
value is negative the image will be flipped vertically. Note that if <code class="docutils literal notranslate"><span class="pre">x_scale</span></code> is not specified
then it will match <code class="docutils literal notranslate"><span class="pre">x_scale</span></code> to maintain the aspect ratio.</p>
<p><code class="docutils literal notranslate"><span class="pre">roi</span></code> is the region-of-interest rectangle tuple (x, y, w, h) of the source image to draw. This
allows you to extract just the pixels in the ROI to scale and draw on the destination image.</p>
<p><code class="docutils literal notranslate"><span class="pre">rgb_channel</span></code> is the RGB channel (0=R, G=1, B=2) to extract from an RGB565 image (if passed)
and to render onto the destination image. For example, if you pass <code class="docutils literal notranslate"><span class="pre">rgb_channel=1</span></code> this will
extract the green channel of the source RGB565 image and draw that in grayscale on the
destination image.</p>
<p><code class="docutils literal notranslate"><span class="pre">alpha</span></code> controls how much of the source image to blend into the destination image. A value of
255 draws an opaque source image while a value lower than 255 produces a blend between the source
and destination image. 0 results in no modification to the destination image.</p>
<p><code class="docutils literal notranslate"><span class="pre">color_palette</span></code> if not <code class="docutils literal notranslate"><span class="pre">-1</span></code> can be an a color palette enum or
a 256 pixel in total RGB565 image to use as a color lookup table on the grayscale value of
whatever the source image is. This is applied after <code class="docutils literal notranslate"><span class="pre">rgb_channel</span></code> extraction if used.</p>
<p><code class="docutils literal notranslate"><span class="pre">alpha_palette</span></code> if not <code class="docutils literal notranslate"><span class="pre">-1</span></code> can be a 256 pixel in total GRAYSCALE image to use as a alpha
palette which modulates the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> value of the source image being drawn at a pixel pixel
level allowing you to precisely control the alpha value of pixels based on their grayscale value.
A pixel value of 255 in the alpha lookup table is opaque which anything less than 255 becomes
more transparent until 0. This is applied after <code class="docutils literal notranslate"><span class="pre">rgb_channel</span></code> extraction if used.</p>
<p><code class="docutils literal notranslate"><span class="pre">hint</span></code> can be a logical OR of the flags:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="omv.image.html#image.AREA" title="image.AREA"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.AREA</span></code></a>: Use area scaling when downscaling versus the default of nearest neighbor.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.BILINEAR" title="image.BILINEAR"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.BILINEAR</span></code></a>: Use bilinear scaling versus the default of nearest neighbor scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.BICUBIC" title="image.BICUBIC"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.BICUBIC</span></code></a>: Use bicubic scaling versus the default of nearest neighbor scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.CENTER" title="image.CENTER"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.CENTER</span></code></a>: Center the image being drawn on the display. This is applied after scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.HMIRROR" title="image.HMIRROR"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.HMIRROR</span></code></a>: Horizontally mirror the image.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.VFLIP" title="image.VFLIP"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.VFLIP</span></code></a>: Vertically flip the image.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.TRANSPOSE" title="image.TRANSPOSE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.TRANSPOSE</span></code></a>: Transpose the image (swap x/y).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.EXTRACT_RGB_CHANNEL_FIRST" title="image.EXTRACT_RGB_CHANNEL_FIRST"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.EXTRACT_RGB_CHANNEL_FIRST</span></code></a>: Do rgb_channel extraction before scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.APPLY_COLOR_PALETTE_FIRST" title="image.APPLY_COLOR_PALETTE_FIRST"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.APPLY_COLOR_PALETTE_FIRST</span></code></a>: Apply color palette before scaling.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.SCALE_ASPECT_KEEP" title="image.SCALE_ASPECT_KEEP"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.SCALE_ASPECT_KEEP</span></code></a>: Scale the image being drawn to fit inside the display.</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.SCALE_ASPECT_EXPAND" title="image.SCALE_ASPECT_EXPAND"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.SCALE_ASPECT_EXPAND</span></code></a>: Scale the image being drawn to fill the display (results in cropping)</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.SCALE_ASPECT_IGNORE" title="image.SCALE_ASPECT_IGNORE"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.SCALE_ASPECT_IGNORE</span></code></a>: Scale the image being drawn to fill the display (results in stretching).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.ROTATE_90" title="image.ROTATE_90"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.ROTATE_90</span></code></a>: Rotate the image by 90 degrees (this is just VFLIP | TRANSPOSE).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.ROTATE_180" title="image.ROTATE_180"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.ROTATE_180</span></code></a>: Rotate the image by 180 degrees (this is just HMIRROR | VFLIP).</p></li>
<li><p><a class="reference internal" href="omv.image.html#image.ROTATE_270" title="image.ROTATE_270"><code class="xref any py py-data docutils literal notranslate"><span class="pre">image.ROTATE_270</span></code></a>: Rotate the image by 270 degrees (this is just HMIRROR | TRANSPOSE).</p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">scale</span></code> is a two value tuple which controls the min and max depth (in mm) to scale
the <code class="docutils literal notranslate"><span class="pre">depth</span></code> image. By default it’s equal to the image <code class="docutils literal notranslate"><span class="pre">depth</span></code> min and <code class="docutils literal notranslate"><span class="pre">depth</span></code> max.</p>
<p><code class="docutils literal notranslate"><span class="pre">pixformat</span></code> if specified controls the final image pixel format.</p>
<p><code class="docutils literal notranslate"><span class="pre">timeout</span></code> if not -1 then how many milliseconds to wait for the new frame.</p>
<p>Returns an image object.</p>
</dd></dl>

</section>
<section id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this heading">¶</a></h2>
<dl class="py data">
<dt class="sig sig-object py" id="tof.TOF_NONE">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">TOF_NONE</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></em><a class="headerlink" href="#tof.TOF_NONE" title="Permalink to this definition">¶</a></dt>
<dd><p>No TOF sensor type.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="tof.TOF_VL53LX">
<span class="sig-prename descclassname"><span class="pre">tof.</span></span><span class="sig-name descname"><span class="pre">TOF_VL53LX</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="builtins.html#int" title="int"><span class="pre">int</span></a></em><a class="headerlink" href="#tof.TOF_VL53LX" title="Permalink to this definition">¶</a></dt>
<dd><p>VL53L5CX or VL53L8CX TOF sensor.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="omv.fir.html" class="btn btn-neutral float-left" title="fir — thermal sensor driver (fir == far infrared)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="omv.tv.html" class="btn btn-neutral float-right" title="tv — tv shield driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2025, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 28 Dec 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>