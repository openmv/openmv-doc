<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>class SDCard – secure digital memory card &mdash; MicroPython 1.22 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=d5a28fe3" />
      <link rel="stylesheet" href="../_static/customstyle.css" type="text/css" />

  
    <link rel="shortcut icon" href="../_static/openmv.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=f8c2205d"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            MicroPython
              <img src="../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.22
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">MicroPython libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">class SDCard – secure digital memory card</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/library/machine.SDCard.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="class-sdcard-secure-digital-memory-card">
<span id="machine-sdcard"></span><h1>class SDCard – secure digital memory card<a class="headerlink" href="#class-sdcard-secure-digital-memory-card" title="Permalink to this heading">¶</a></h1>
<p>SD cards are one of the most common small form factor removable storage media.
SD cards come in a variety of sizes and physical form factors. MMC cards are
similar removable storage devices while eMMC devices are electrically similar
storage devices designed to be embedded into other systems. All three form
share a common protocol for communication with their host system and high-level
support looks the same for them all. As such in MicroPython they are implemented
in a single class called <a class="reference internal" href="#machine.SDCard" title="machine.SDCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">machine.SDCard</span></code></a> .</p>
<p>Both SD and MMC interfaces support being accessed with a variety of bus widths.
When being accessed with a 1-bit wide interface they can be accessed using the
SPI protocol. Different MicroPython hardware platforms support different widths
and pin configurations but for most platforms there is a standard configuration
for any given hardware. In general constructing an <code class="docutils literal notranslate"><span class="pre">SDCard</span></code> object with without
passing any parameters will initialise the interface to the default card slot
for the current hardware. The arguments listed below represent the common
arguments that might need to be set in order to use either a non-standard slot
or a non-standard pin assignment. The exact subset of arguments supported will
vary from platform to platform.</p>
<dl class="py class">
<dt class="sig sig-object py" id="machine.SDCard">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machine.</span></span><span class="sig-name descname"><span class="pre">SDCard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sck</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">miso</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mosi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20000000</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#machine.SDCard" title="Permalink to this definition">¶</a></dt>
<dd><p>This class provides access to SD or MMC storage cards using either
a dedicated SD/MMC interface hardware or through an SPI channel.
The class implements the block protocol defined by <a class="reference internal" href="os.html#os.AbstractBlockDev" title="os.AbstractBlockDev"><code class="xref py py-class docutils literal notranslate"><span class="pre">os.AbstractBlockDev</span></code></a>.
This allows the mounting of an SD card to be as simple as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="n">machine</span><span class="o">.</span><span class="n">SDCard</span><span class="p">(),</span> <span class="s2">&quot;/sd&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The constructor takes the following parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><em>slot</em> selects which of the available interfaces to use. Leaving this
unset will select the default interface.</p></li>
<li><p><em>width</em> selects the bus width for the SD/MMC interface.</p></li>
<li><p><em>cd</em> can be used to specify a card-detect pin.</p></li>
<li><p><em>wp</em> can be used to specify a write-protect pin.</p></li>
<li><p><em>sck</em> can be used to specify an SPI clock pin.</p></li>
<li><p><em>miso</em> can be used to specify an SPI miso pin.</p></li>
<li><p><em>mosi</em> can be used to specify an SPI mosi pin.</p></li>
<li><p><em>cs</em> can be used to specify an SPI chip select pin.</p></li>
<li><p><em>freq</em> selects the SD/MMC interface frequency in Hz (only supported on the ESP32).</p></li>
</ul>
</div></blockquote>
</dd></dl>

<section id="implementation-specific-details">
<h2>Implementation-specific details<a class="headerlink" href="#implementation-specific-details" title="Permalink to this heading">¶</a></h2>
<p>Different implementations of the <code class="docutils literal notranslate"><span class="pre">SDCard</span></code> class on different hardware support
varying subsets of the options above.</p>
<section id="pyboard">
<h3>PyBoard<a class="headerlink" href="#pyboard" title="Permalink to this heading">¶</a></h3>
<p>The standard PyBoard has just one slot. No arguments are necessary or supported.</p>
</section>
<section id="esp32">
<h3>ESP32<a class="headerlink" href="#esp32" title="Permalink to this heading">¶</a></h3>
<p>The ESP32 provides two channels of SD/MMC hardware and also supports
access to SD Cards through either of the two SPI ports that are
generally available to the user. As a result the <em>slot</em> argument can
take a value between 0 and 3, inclusive. Slots 0 and 1 use the
built-in SD/MMC hardware while slots 2 and 3 use the SPI ports. Slot 0
supports 1, 4 or 8-bit wide access while slot 1 supports 1 or 4-bit
access; the SPI slots only support 1-bit access.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Slot 0 is used to communicate with on-board flash memory
on most ESP32 modules and so will be unavailable to the
user.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most ESP32 modules that provide an SD card slot using the
dedicated hardware only wire up 1 data pin, so the default
value for <em>width</em> is 1.</p>
</div>
</div></blockquote>
<p>The pins used by the dedicated SD/MMC hardware are fixed. The pins
used by the SPI hardware can be reassigned.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any of the SPI signals are remapped then all of the SPI
signals will pass through a GPIO multiplexer unit which
can limit the performance of high frequency signals. Since
the normal operating speed for SD cards is 40MHz this can
cause problems on some cards.</p>
</div>
</div></blockquote>
<p>The default (and preferred) pin assignment are as follows:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Slot</p></th>
<th class="head"><p>0</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Signal</p></th>
<th class="head"><p>Pin</p></th>
<th class="head"><p>Pin</p></th>
<th class="head"><p>Pin</p></th>
<th class="head"><p>Pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>sck</p></td>
<td><p>6</p></td>
<td><p>14</p></td>
<td><p>18</p></td>
<td><p>14</p></td>
</tr>
<tr class="row-even"><td><p>cmd</p></td>
<td><p>11</p></td>
<td><p>15</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>cs</p></td>
<td></td>
<td></td>
<td><p>5</p></td>
<td><p>15</p></td>
</tr>
<tr class="row-even"><td><p>miso</p></td>
<td></td>
<td></td>
<td><p>19</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p>mosi</p></td>
<td></td>
<td></td>
<td><p>23</p></td>
<td><p>13</p></td>
</tr>
<tr class="row-even"><td><p>D0</p></td>
<td><p>7</p></td>
<td><p>2</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>D1</p></td>
<td><p>8</p></td>
<td><p>4</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>D2</p></td>
<td><p>9</p></td>
<td><p>12</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>D3</p></td>
<td><p>10</p></td>
<td><p>13</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>D4</p></td>
<td><p>16</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>D5</p></td>
<td><p>17</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>D6</p></td>
<td><p>5</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>D7</p></td>
<td><p>18</p></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="cc3200">
<h3>cc3200<a class="headerlink" href="#cc3200" title="Permalink to this heading">¶</a></h3>
<p>You can set the pins used for SPI access by passing a tuple as the
<em>pins</em> argument.</p>
<p><em>Note:</em> The current cc3200 SD card implementation names the this class
<a class="reference internal" href="machine.SD.html#machine.SD" title="machine.SD"><code class="xref py py-class docutils literal notranslate"><span class="pre">machine.SD</span></code></a> rather than <a class="reference internal" href="#machine.SDCard" title="machine.SDCard"><code class="xref py py-class docutils literal notranslate"><span class="pre">machine.SDCard</span></code></a> .</p>
</section>
<section id="mimxrt">
<h3>mimxrt<a class="headerlink" href="#mimxrt" title="Permalink to this heading">¶</a></h3>
<p>The SDCard module for the mimxrt port only supports access via dedicated SD/MMC
peripheral (USDHC) in 4-bit mode with 50MHz clock frequency exclusively.
Unfortunately the MIMXRT1011 controller does not support the USDHC peripheral.
Hence this controller does not feature the <code class="docutils literal notranslate"><span class="pre">machine.SDCard</span></code> module.</p>
<p>Due to the decision to only support 4-bit mode with 50MHz clock frequency the
interface has been simplified, and the constructor signature is:</p>
<dl class="py class">
<dt class="sig sig-object py">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">machine.</span></span><span class="sig-name descname"><span class="pre">SDCard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span></dt>
<dd></dd></dl>

<p>The pins used for the USDHC peripheral have to be configured in <code class="docutils literal notranslate"><span class="pre">mpconfigboard.h</span></code>.
Most of the controllers supported by the mimxrt port provide up to two USDHC
peripherals.  Therefore the pin configuration is performed using the macro
<code class="docutils literal notranslate"><span class="pre">MICROPY_USDHCx</span></code> with x being 1 or 2 respectively.</p>
<p>The following shows an example configuration for USDHC1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define MICROPY_USDHC1 \</span>
  <span class="p">{</span> \
        <span class="o">.</span><span class="n">cmd</span>   <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_02_USDHC1_CMD</span><span class="p">},</span> \
        <span class="o">.</span><span class="n">clk</span>   <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_03_USDHC1_CLK</span> <span class="p">},</span> \
        <span class="o">.</span><span class="n">cd_b</span>  <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_06_USDHC1_CD_B</span> <span class="p">},</span>\
        <span class="o">.</span><span class="n">data0</span> <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_04_USDHC1_DATA0</span> <span class="p">},</span>\
        <span class="o">.</span><span class="n">data1</span> <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_05_USDHC1_DATA1</span> <span class="p">},</span>\
        <span class="o">.</span><span class="n">data2</span> <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_00_USDHC1_DATA2</span> <span class="p">},</span>\
        <span class="o">.</span><span class="n">data3</span> <span class="o">=</span> <span class="p">{</span> <span class="n">GPIO_SD_B0_01_USDHC1_DATA3</span> <span class="p">},</span>\
  <span class="p">}</span>
</pre></div>
</div>
<p>If the card detect pin is not used (cb_b pin) then the respective entry has to be
filled with the following dummy value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#define USDHC_DUMMY_PIN NULL , 0</span>
</pre></div>
</div>
<p>Based on the definition of macro <code class="docutils literal notranslate"><span class="pre">MICROPY_USDHC1</span></code> and/or <code class="docutils literal notranslate"><span class="pre">MICROPY_USDHC2</span></code>
the <code class="docutils literal notranslate"><span class="pre">machine.SDCard</span></code> module either supports one or two slots.  If only one of
the defines is provided, calling <code class="docutils literal notranslate"><span class="pre">machine.SDCard()</span></code> or <code class="docutils literal notranslate"><span class="pre">machine.SDCard(1)</span></code>
will return an instance using the respective USDHC peripheral.  When both macros
are defined, calling <code class="docutils literal notranslate"><span class="pre">machine.SDCard(2)</span></code> returns an instance using USDHC2.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 05 Mar 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>