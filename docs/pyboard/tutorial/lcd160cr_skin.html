<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5. The LCD160CR skin &mdash; MicroPython 1.22 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=d5a28fe3" />
      <link rel="stylesheet" href="../../_static/customstyle.css" type="text/css" />

  
    <link rel="shortcut icon" href="../../_static/openmv.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=f8c2205d"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            MicroPython
              <img src="../../_static/web-logo-sticky.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.22
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../library/index.html">MicroPython libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/index.html">MicroPython language and implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genrst/index.html">MicroPython differences from CPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">MicroPython license information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openmvcam/quickref.html">Quick reference for the openmvcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MicroPython</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">5. </span>The LCD160CR skin</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/pyboard/tutorial/lcd160cr_skin.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-lcd160cr-skin">
<h1><span class="section-number">5. </span>The LCD160CR skin<a class="headerlink" href="#the-lcd160cr-skin" title="Permalink to this heading">¶</a></h1>
<p>This tutorial shows how to get started using the LCD160CR skin.</p>
<a class="reference internal image-reference" href="http://micropython.org/resources/LCD160CRv10-positions.jpg"><img alt="LCD160CRv1.0 picture" src="http://micropython.org/resources/LCD160CRv10-positions.jpg" style="width: 800px;" /></a>
<p>For detailed documentation of the driver for the display see the
<a class="reference internal" href="../../library/lcd160cr.html#module-lcd160cr" title="lcd160cr: control of LCD160CR display"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lcd160cr</span></code></a> module.</p>
<section id="plugging-in-the-display">
<h2><span class="section-number">5.1. </span>Plugging in the display<a class="headerlink" href="#plugging-in-the-display" title="Permalink to this heading">¶</a></h2>
<p>The display can be plugged directly into a pyboard (all pyboard versions
are supported).  You plug the display onto the top of the pyboard either
in the X or Y positions.  The display should cover half of the pyboard.
See the picture above for how to achieve this; the left half of the picture
shows the X position, and the right half shows the Y position.</p>
</section>
<section id="getting-the-driver">
<h2><span class="section-number">5.2. </span>Getting the driver<a class="headerlink" href="#getting-the-driver" title="Permalink to this heading">¶</a></h2>
<p>You can control the display directly using a power/enable pin and an I2C
bus, but it is much more convenient to use the driver provided by the
<a class="reference internal" href="../../library/lcd160cr.html#module-lcd160cr" title="lcd160cr: control of LCD160CR display"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lcd160cr</span></code></a> module.  This driver is included in recent version of the
pyboard firmware (see <a class="reference external" href="http://micropython.org/download">here</a>).  You
can also find the driver in the GitHub repository
<a class="reference external" href="https://github.com/micropython/micropython/blob/master/drivers/display/lcd160cr.py">here</a>, and to use this version you will need to copy the file to your
board, into a directory that is searched by import (usually the lib/
directory).</p>
<p>Once you have the driver installed you need to import it to use it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">lcd160cr</span>
</pre></div>
</div>
</section>
<section id="testing-the-display">
<h2><span class="section-number">5.3. </span>Testing the display<a class="headerlink" href="#testing-the-display" title="Permalink to this heading">¶</a></h2>
<p>There is a test program which you can use to test the features of the display,
and which also serves as a basis to start creating your own code that uses the
LCD.  This test program is available on GitHub
<a class="reference external" href="https://github.com/micropython/micropython/blob/master/drivers/display/lcd160cr_test.py">here</a>.
Copy it to the board over USB mass storage, or by using <a class="reference internal" href="../../reference/mpremote.html#mpremote"><span class="std std-ref">MicroPython remote control: mpremote</span></a>.</p>
<p>To run the test from the MicroPython prompt do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">lcd160cr_test</span>
</pre></div>
</div>
<p>It will then print some brief instructions.  You will need to know which
position your display is connected to (X or Y) and then you can run (assuming
you have the display on position X):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test_all</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="drawing-some-graphics">
<h2><span class="section-number">5.4. </span>Drawing some graphics<a class="headerlink" href="#drawing-some-graphics" title="Permalink to this heading">¶</a></h2>
<p>You must first create an LCD160CR object which will control the display.  Do this
using:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">lcd160cr</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span> <span class="o">=</span> <span class="n">lcd160cr</span><span class="o">.</span><span class="n">LCD160CR</span><span class="p">(</span><span class="s1">&#39;X&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This assumes your display is connected in the X position.  If it’s in the Y
position then use <code class="docutils literal notranslate"><span class="pre">lcd</span> <span class="pre">=</span> <span class="pre">lcd160cr.LCD160CR('Y')</span></code> instead.</p>
<p>To erase the screen and draw a line, try:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span><span class="o">.</span><span class="n">set_pen</span><span class="p">(</span><span class="n">lcd</span><span class="o">.</span><span class="n">rgb</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">lcd</span><span class="o">.</span><span class="n">rgb</span><span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span><span class="o">.</span><span class="n">erase</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">80</span><span class="p">)</span>
</pre></div>
</div>
<p>The next example draws random rectangles on the screen.  You can copy-and-paste it
into the MicroPython prompt by first pressing “Ctrl-E” at the prompt, then “Ctrl-D”
once you have pasted the text.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">fg</span> <span class="o">=</span> <span class="n">lcd</span><span class="o">.</span><span class="n">rgb</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">))</span>
    <span class="n">bg</span> <span class="o">=</span> <span class="n">lcd</span><span class="o">.</span><span class="n">rgb</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">))</span>
    <span class="n">lcd</span><span class="o">.</span><span class="n">set_pen</span><span class="p">(</span><span class="n">fg</span><span class="p">,</span> <span class="n">bg</span><span class="p">)</span>
    <span class="n">lcd</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lcd</span><span class="o">.</span><span class="n">w</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">lcd</span><span class="o">.</span><span class="n">h</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">40</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="using-the-touch-sensor">
<h2><span class="section-number">5.5. </span>Using the touch sensor<a class="headerlink" href="#using-the-touch-sensor" title="Permalink to this heading">¶</a></h2>
<p>The display includes a resistive touch sensor that can report the position (in
pixels) of a single force-based touch on the screen.  To see if there is a touch
on the screen use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span><span class="o">.</span><span class="n">is_touched</span><span class="p">()</span>
</pre></div>
</div>
<p>This will return either <code class="docutils literal notranslate"><span class="pre">False</span></code> or <code class="docutils literal notranslate"><span class="pre">True</span></code>.  Run the above command while touching
the screen to see the result.</p>
<p>To get the location of the touch you can use the method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lcd</span><span class="o">.</span><span class="n">get_touch</span><span class="p">()</span>
</pre></div>
</div>
<p>This will return a 3-tuple, with the first entry being 0 or 1 depending on whether
there is currently anything touching the screen (1 if there is), and the second and
third entries in the tuple being the x and y coordinates of the current (or most
recent) touch.</p>
</section>
<section id="directing-the-micropython-output-to-the-display">
<h2><span class="section-number">5.6. </span>Directing the MicroPython output to the display<a class="headerlink" href="#directing-the-micropython-output-to-the-display" title="Permalink to this heading">¶</a></h2>
<p>The display supports input from a UART and implements basic VT100 commands, which
means it can be used as a simple, general purpose terminal.  Let’s set up the
pyboard to redirect its output to the display.</p>
<p>First you need to create a UART object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pyb</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">uart</span> <span class="o">=</span> <span class="n">pyb</span><span class="o">.</span><span class="n">UART</span><span class="p">(</span><span class="s1">&#39;XA&#39;</span><span class="p">,</span> <span class="mi">115200</span><span class="p">)</span>
</pre></div>
</div>
<p>This assumes your display is connected to position X.  If it’s on position Y then
use <code class="docutils literal notranslate"><span class="pre">uart</span> <span class="pre">=</span> <span class="pre">pyb.UART('YA',</span> <span class="pre">115200)</span></code> instead.</p>
<p>Now, connect the REPL output to this UART:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyb</span><span class="o">.</span><span class="n">repl_uart</span><span class="p">(</span><span class="n">uart</span><span class="p">)</span>
</pre></div>
</div>
<p>From now on anything you type at the MicroPython prompt, and any output you
receive, will appear on the display.</p>
<p>No set-up commands are required for this mode to work and you can use the display
to monitor the output of any UART, not just from the pyboard.  All that is needed
is for the display to have power, ground and the power/enable pin driven high.
Then any characters on the display’s UART input will be printed to the screen.
You can adjust the UART baudrate from the default of 115200 using the
<a class="reference internal" href="../../library/lcd160cr.html#lcd160cr.LCD160CR.set_uart_baudrate" title="lcd160cr.LCD160CR.set_uart_baudrate"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">set_uart_baudrate</span></code></a> method.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright - The MicroPython Documentation is Copyright © 2014-2024, Damien P. George, Paul Sokolovsky, and contributors.
      <span class="lastupdated">Last updated on 05 Mar 2024.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Language and External Links</span>
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Language</dt>
      <dd>
        <a href="https://openmv.io">English</a>
      </dd>
      <dd>
        <a href="http://doc.singtown.cc">中文</a>
      </dd>
    </dl>
    <hr/>
    <dl>
      <dt>External links</dt>
      <dd>
        <a href="https://openmv.io">openmv.io</a>
      </dd>
      <dd>
        <a href="http://forums.openmv.io">forums.openmv.io</a>
      </dd>
      <dd>
        <a href="https://github.com/openmv/openmv">github.com/openmv/openmv</a>
      </dd>
      <dd>
        <a href="http://micropython.org">micropython.org</a>
      </dd>
      <dd>
        <a href="http://forum.micropython.org">forum.micropython.org</a>
      </dd>
      <dd>
        <a href="https://github.com/micropython/micropython">github.com/micropython/micropython</a>
      </dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>